"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[751],{323:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(5043),i=s(5475),r=s(6566),l=s(214),o=s(3340),n=s(3003),d=s(579);const c=(0,n.Ng)((e=>({user:e.Auth.user})),{})((e=>{var t,s,n,c,m,u,h,x,p,g;let{item:v,count:f,update_item:y,remove_item:j,render:b,setRender:w,setAlert:N,user:_}=e;const[A,E]=(0,a.useState)(1);(0,a.useEffect)((()=>{f&&E(f)}),[f]);return(0,d.jsxs)("li",{className:"flex py-6 sm:py-10",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("img",{src:null===v||void 0===v||null===(t=v.product)||void 0===t?void 0:t.photo,alt:`Imagen del producto ${(null===v||void 0===v||null===(s=v.product)||void 0===s?void 0:s.name)||""}`,className:"w-24 h-24 rounded-md object-center object-cover sm:w-48 sm:h-48"})}),(0,d.jsxs)("div",{className:"ml-4 flex-1 flex flex-col justify-between sm:ml-6",children:[(0,d.jsxs)("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex justify-between",children:(0,d.jsx)("h3",{className:"text-sm",children:(0,d.jsx)(i.N_,{to:`/product/${null===v||void 0===v||null===(n=v.product)||void 0===n?void 0:n.id}`,className:"font-medium text-gray-700 hover:text-gray-800",children:null===v||void 0===v||null===(c=v.product)||void 0===c?void 0:c.name})})}),(0,d.jsx)("div",{className:"mt-1 flex text-sm",children:(0,d.jsx)("p",{className:"text-gray-500",children:"Color"})}),(0,d.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:0===_.mayorista_tipo?`${null===v||void 0===v||null===(m=v.product)||void 0===m?void 0:m.price} Bs`:1===_.mayorista_tipo?`${null===v||void 0===v||null===(u=v.product)||void 0===u?void 0:u.price_mayorista_1} Bs`:2===_.mayorista_tipo?`${null===v||void 0===v||null===(h=v.product)||void 0===h?void 0:h.price_mayorista_2} Bs`:3===_.mayorista_tipo?`${null===v||void 0===v||null===(x=v.product)||void 0===x?void 0:x.price_mayorista_3} Bs`:"N/A"})]}),(0,d.jsxs)("div",{className:"mt-4 sm:mt-0 sm:pr-9",children:[(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{var t;(null===v||void 0===v||null===(t=v.product)||void 0===t?void 0:t.quantity)>=A?(await y(v,A),w(!b)):N("No hay suficiente stock disponible","danger")}catch(s){console.error("Error actualizando el carrito:",s),N("Error al actualizar el producto","danger")}},children:[(0,d.jsx)("select",{name:"item_count",onChange:e=>E(e.target.value),value:A,className:"max-w-full rounded-md border border-gray-300 py-1.5 text-base leading-5 font-medium text-gray-700 text-left shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Array.from({length:(null===v||void 0===v||null===(p=v.product)||void 0===p?void 0:p.quantity)||1},((e,t)=>(0,d.jsx)("option",{value:t+1,children:t+1},t+1)))}),(0,d.jsx)("button",{type:"submit",className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:(0,d.jsx)("span",{className:"mx-2",children:"Actualizar"})})]}),(0,d.jsx)("div",{className:"absolute top-0 right-0",children:(0,d.jsxs)("button",{onClick:async()=>{try{await j(v),w(!b)}catch(e){console.error("Error eliminando el producto:",e)}},className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:[(0,d.jsx)("span",{className:"sr-only",children:"Eliminar"}),(0,d.jsx)(r.A,{className:"h-5 w-5","aria-hidden":"true"})]})})]})]}),(0,d.jsx)("p",{className:"mt-4 flex text-sm text-gray-700 space-x-2",children:(null===v||void 0===v||null===(g=v.product)||void 0===g?void 0:g.quantity)>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"flex-shrink-0 h-5 w-5 text-green-500","aria-hidden":"false","aria-label":"En Stock"}),(0,d.jsx)("span",{children:"En Stock"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.A,{className:"flex-shrink-0 h-5 w-5 text-gray-300","aria-hidden":"false","aria-label":"Agotado"}),(0,d.jsx)("span",{children:"Agotado"})]})})]})]})}))},6751:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(6669),i=s(5043),r=s(3003),l=s(3115),o=s(1507),n=s(3178),d=s(323),c=s(5475),m=s(579);const u=(0,r.Ng)((e=>({isAuthenticated:e.Auth.isAuthenticated,items:e.Cart.items,wishlist_items:e.Wishlist.items,amount:e.Cart.amount,compare_amount:e.Cart.compare_amount,total_items:e.Cart.total_items,user:e.Auth.user})),{get_items:o.Su,get_total:o.OL,get_item_total:o.ES,remove_item:o.j5,update_item:o.eV,setAlert:l.n,remove_wishlist_item:n.dm,get_wishlist_items:n.uO})((e=>{let{get_items:t,get_total:s,get_item_total:l,isAuthenticated:o,items:u,compare_amount:h,total_items:x,remove_item:p,update_item:g,setAlert:v,wishlist_items:f,user:y}=e;const j=(0,r.wA)(),[b,w]=(0,i.useState)(!1);(0,i.useEffect)((()=>{window.scrollTo(0,0),t(),s(),l(),j((0,n.uO)())}),[b,t,s,l,j]);const N=u&&0!==u.length?u.reduce(((e,t)=>{var s,a,i,r;let l=(null===(s=t.product)||void 0===s?void 0:s.price)||0;return 1===(null===y||void 0===y?void 0:y.mayorista_tipo)?l=(null===(a=t.product)||void 0===a?void 0:a.price_mayorista_1)||l:2===(null===y||void 0===y?void 0:y.mayorista_tipo)?l=(null===(i=t.product)||void 0===i?void 0:i.price_mayorista_2)||l:3===(null===y||void 0===y?void 0:y.mayorista_tipo)&&(l=(null===(r=t.product)||void 0===r?void 0:r.price_mayorista_3)||l),e+l*t.count}),0):0;return(0,m.jsx)(a.A,{children:(0,m.jsx)("div",{className:"bg-white",children:(0,m.jsxs)("div",{className:"max-w-2xl mx-auto pt-16 pb-24 px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:[(0,m.jsxs)("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:["Productos en Carrito (",x,")"]}),(0,m.jsxs)("div",{className:"mt-12 lg:grid lg:grid-cols-12 lg:gap-x-12 lg:items-start xl:gap-x-16",children:[(0,m.jsxs)("section",{"aria-labelledby":"cart-heading",className:"lg:col-span-7",children:[(0,m.jsx)("h2",{id:"cart-heading",className:"sr-only",children:"Items in your shopping cart"}),(0,m.jsx)("ul",{className:"border-t border-b border-gray-200 divide-y divide-gray-200",children:(0,m.jsx)("div",{children:u&&0!==u.length&&u.map(((e,t)=>{let s=e.count;return(0,m.jsx)("div",{children:(0,m.jsx)(d.A,{item:e,count:s,update_item:g,remove_item:p,render:b,setRender:w,setAlert:v})},t)}))})})]}),(0,m.jsxs)("section",{"aria-labelledby":"summary-heading",className:"mt-16 bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8 lg:mt-0 lg:col-span-5",children:[(0,m.jsx)("h2",{id:"summary-heading",className:"text-lg font-medium text-gray-900",children:"Resumen del pedido"}),(0,m.jsxs)("dl",{className:"mt-6 space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),(0,m.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[h.toFixed(2)," Bs"]})]}),(0,m.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,m.jsx)("dt",{className:"text-sm text-gray-600",children:"Estimaci\xf3n de env\xedo"}),(0,m.jsx)("dd",{className:"text-sm font-medium text-gray-900",children:"0 Bs"})]}),(0,m.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,m.jsx)("dt",{className:"text-sm text-gray-600",children:"Estimaci\xf3n de Impuestos"}),(0,m.jsx)("dd",{className:"text-sm font-medium text-gray-900",children:"0 Bs"})]}),(0,m.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,m.jsx)("dt",{className:"text-base font-medium text-gray-900",children:"Total Pedido"}),(0,m.jsxs)("dd",{className:"text-base font-medium text-gray-900",children:[N.toFixed(2)," Bs"]})]})]}),(0,m.jsx)("div",{className:"mt-6",children:x<1?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(c.N_,{to:"/shop",children:(0,m.jsx)("button",{className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-purple-night",children:"Buscar items"})})}):o?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(c.N_,{to:"/checkout",children:(0,m.jsx)("button",{className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-purple-night",children:"Verificar"})})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(c.N_,{to:"/login",children:(0,m.jsx)("button",{className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-purple-night",children:"Login"})})})})]})]})]})})})}))},3178:(e,t,s)=>{s.d(t,{OY:()=>o,dm:()=>d,mN:()=>n,uO:()=>l});var a=s(6213),i=s(4308);const r=()=>({headers:{Authorization:`JWT ${localStorage.getItem("access")}`,"Content-Type":"application/json",Accept:"application/json"}}),l=()=>async e=>{if(localStorage.getItem("access"))try{const t=await a.A.get("http://localhost:8000/api/wishlist/wishlist-items",r());e({type:i.Q$,payload:t.data})}catch(t){e({type:i.ti})}},o=e=>async t=>{if(!localStorage.getItem("access"))return;const s=JSON.stringify({product_id:e});try{const e=await a.A.post("http://localhost:8000/api/wishlist/add-item",s,r());t({type:i.eW,payload:e.data})}catch(l){t({type:i.Xd})}},n=()=>async e=>{if(localStorage.getItem("access"))try{const t=await a.A.get("http://localhost:8000/api/wishlist/get-item-total",r());e({type:i.qT,payload:t.data})}catch(t){e({type:i.hZ})}},d=e=>async t=>{if(!localStorage.getItem("access"))return;const s={...r(),data:{product_id:e}};try{await a.A.delete("http://localhost:8000/api/wishlist/remove-item",s),t({type:i.$F,payload:e}),console.log("\ud83d\ude80 Producto eliminado del wishlist:",e)}catch(l){t({type:i.in})}}},214:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043);const i=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}))},3340:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043);const i=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"}))}))},6566:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043);const i=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))}))}}]);
//# sourceMappingURL=751.0a647f6e.chunk.js.map