"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[749],{8493:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var r=a(342),o=a(5043),l=a(3401),n=a(6910),s=a(9161),c=a(156),i=a(5962);var d=a(3057),u=a(1488),p=a(9358),g=a(2225),m=a(7950);function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let[r,o]of Object.entries(e))y(a,f(t,r),o);return a}function f(e,t){return e?e+"["+t+"]":t}function y(e,t,a){if(Array.isArray(a))for(let[r,o]of a.entries())y(e,f(t,r.toString()),o);else a instanceof Date?e.push([t,a.toISOString()]):"boolean"==typeof a?e.push([t,a?"1":"0"]):"string"==typeof a?e.push([t,a]):"number"==typeof a?e.push([t,`${a}`]):null==a?e.push([t,""]):h(a,t,e)}var b=a(5641),v=a(6593);let x=(0,o.createContext)(null);function S(e){let{children:t}=e,a=(0,o.useContext)(x);if(!a)return o.createElement(o.Fragment,null,t);let{target:r}=a;return r?(0,m.createPortal)(o.createElement(o.Fragment,null,t),r):null}function j(e){let{data:t,form:a,disabled:r,onReset:l,overrides:n}=e,[s,c]=(0,o.useState)(null),i=(0,d.L)();return(0,o.useEffect)((()=>{if(l&&s)return i.addEventListener(s,"reset",l)}),[s,a,l]),o.createElement(S,null,o.createElement(w,{setForm:c,formId:a}),h(t).map((e=>{let[t,l]=e;return o.createElement(v.j,{features:v.u.Hidden,...(0,b.oE)({key:t,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:a,disabled:r,name:t,value:l,...n})})})))}function w(e){let{setForm:t,formId:a}=e;return(0,o.useEffect)((()=>{if(a){let e=document.getElementById(a);e&&t(e)}}),[t,a]),a?null:o.createElement(v.j,{features:v.u.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:e=>{if(!e)return;let a=e.closest("form");a&&t(a)}})}var N=a(7376),_=a(6034),A=a(8619),I=a(7507),C=a(1075);let E=(0,o.createContext)(null);E.displayName="GroupContext";let k=o.Fragment;let T=(0,b.FX)((function(e,t){var a;let r=(0,o.useId)(),l=(0,N.q)(),m=(0,g._)(),{id:h=l||`headlessui-switch-${r}`,disabled:f=m||!1,checked:y,defaultChecked:v,onChange:x,name:S,value:w,form:k,autoFocus:T=!1,...F}=e,J=(0,o.useContext)(E),[O,D]=(0,o.useState)(null),P=(0,o.useRef)(null),R=(0,p.P)(P,t,null===J?null:J.setSwitch,D),L=function(e){let[t]=(0,o.useState)(e);return t}(v),[$,q]=function(e,t,a){let[r,l]=(0,o.useState)(a),n=void 0!==e,s=(0,o.useRef)(n),c=(0,o.useRef)(!1),d=(0,o.useRef)(!1);return!n||s.current||c.current?!n&&s.current&&!d.current&&(d.current=!0,s.current=n,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(c.current=!0,s.current=n,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[n?e:r,(0,i._)((e=>(n||l(e),null==t?void 0:t(e))))]}(y,x,null!=L&&L),z=(0,d.L)(),[W,M]=(0,o.useState)(!1),U=(0,i._)((()=>{M(!0),null==q||q(!$),z.nextFrame((()=>{M(!1)}))})),B=(0,i._)((e=>{if((0,_.l)(e.currentTarget))return e.preventDefault();e.preventDefault(),U()})),K=(0,i._)((e=>{e.key===I.D.Space?(e.preventDefault(),U()):e.key===I.D.Enter&&function(e){var t,a;let r=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(r){for(let t of r.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(a=r.requestSubmit)||a.call(r)}}(e.currentTarget)})),H=(0,i._)((e=>e.preventDefault())),V=(0,C.o2)(),Y=(0,A.MM)(),{isFocusVisible:G,focusProps:X}=(0,n.o)({autoFocus:T}),{isHovered:Z,hoverProps:Q}=(0,s.M)({isDisabled:f}),{pressed:ee,pressProps:te}=(0,c.Z)({disabled:f}),ae=(0,o.useMemo)((()=>({checked:$,disabled:f,hover:Z,focus:G,active:ee,autofocus:T,changing:W})),[$,Z,G,ee,f,W,T]),re=(0,b.v6)({id:h,ref:R,role:"switch",type:(0,u.c)(e,O),tabIndex:-1===e.tabIndex?0:null!=(a=e.tabIndex)?a:0,"aria-checked":$,"aria-labelledby":V,"aria-describedby":Y,disabled:f||void 0,autoFocus:T,onClick:B,onKeyUp:K,onKeyPress:H},X,Q,te),oe=(0,o.useCallback)((()=>{if(void 0!==L)return null==q?void 0:q(L)}),[q,L]),le=(0,b.Ci)();return o.createElement(o.Fragment,null,null!=S&&o.createElement(j,{disabled:f,data:{[S]:w||"on"},overrides:{type:"checkbox",checked:$},form:k,onReset:oe}),le({ourProps:re,theirProps:F,slot:ae,defaultTag:"button",name:"Switch"}))})),F=function(e){var t;let[a,r]=(0,o.useState)(null),[l,n]=(0,C.b0)(),[s,c]=(0,A.rU)(),i=(0,o.useMemo)((()=>({switch:a,setSwitch:r})),[a,r]),d=e,u=(0,b.Ci)();return o.createElement(c,{name:"Switch.Description",value:s},o.createElement(n,{name:"Switch.Label",value:l,props:{htmlFor:null==(t=i.switch)?void 0:t.id,onClick(e){a&&(e.currentTarget instanceof HTMLLabelElement&&e.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},o.createElement(E.Provider,{value:i},u({ourProps:{},theirProps:d,slot:{},defaultTag:k,name:"Switch.Group"}))))},J=C.JU,O=A.VY,D=Object.assign(T,{Group:F,Label:J,Description:O});var P=a(6213),R=a(3003),L=a(6999),$=a(579);const q=(0,R.Ng)((e=>({})),{})((function(){(0,o.useEffect)((()=>{window.scrollTo(0,0)}),[]);const[e,t]=(0,o.useState)({anverso:null,reverso:null}),[a,n]=(0,o.useState)(!1),[s,c]=(0,o.useState)(!1),[i,d]=(0,o.useState)({nombre:"",apellido:"",ci:"",numero_celular:"",correo:"",ciudad:"",direccion:"",actividad_economica:"",foto_anverso_ci:null,foto_reverso_ci:null}),u=e=>{"file"===e.target.type?d({...i,[e.target.name]:e.target.files[0]}):d({...i,[e.target.name]:e.target.value})};return(0,$.jsx)(r.A,{children:(0,$.jsxs)("div",{className:"max-w-3xl mx-auto p-10 bg-white shadow-2xl rounded-3xl border border-gray-200 py-16 m-12",children:[(0,$.jsx)("h2",{className:"text-4xl font-extrabold text-midnight-blue text-center mb-6",children:"Pre-Registro de Usuario"}),(0,$.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Nos especializamos en ventas mayoristas. Evaluaremos la informaci\xf3n proporcionada para verificar si califica para registrarse como cliente."}),(0,$.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!a)return void l.oR.error("Debes aceptar los t\xe9rminos y condiciones de privacidad.");c(!0);const t=new FormData;Object.keys(i).forEach((e=>{t.append(e,i[e])}));for(let a of t.entries())console.log(a[0],a[1]);try{await P.A.post("http://localhost:8000/api/user_register/",t,{headers:{"Content-Type":"multipart/form-data"}}),l.oR.success("Registro enviado correctamente.")}catch(r){console.error("Error en el registro:",r.response),l.oR.error("Error al enviar el formulario.")}c(!1)},className:"space-y-6",children:[(0,$.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,$.jsx)("input",{type:"text",name:"nombre",placeholder:"Nombre",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"}),(0,$.jsx)("input",{type:"text",name:"apellido",placeholder:"Apellido",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"})]}),(0,$.jsxs)("div",{className:"space-y-4",children:[(0,$.jsx)("input",{type:"text",name:"ci",placeholder:"C\xe9dula de Identidad",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-600 focus:ring focus:ring-purple-300"}),(0,$.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-12",children:["anverso","reverso"].map((a=>(0,$.jsxs)("label",{className:"relative flex flex-col items-center justify-center  p-3 border border-solid border-midnight-blue rounded-lg bg-blue-50 cursor-pointer hover:bg-blue-100",children:[(0,$.jsx)(L.A,{className:"h-6 w-6 text-midnight-blue"}),(0,$.jsxs)("span",{children:["Subir foto ",a," CI"]}),(0,$.jsx)("input",{type:"file",name:`foto_${a}_ci`,required:!0,onChange:e=>((e,a)=>{const r=e.target.files[0];if(r){const e=new FileReader;e.onload=()=>{t((t=>({...t,[a]:e.result})))},e.readAsDataURL(r)}u&&u(e)})(e,a),className:"hidden",accept:"image/*"}),e[a]&&(0,$.jsx)("img",{src:e[a],alt:`Vista previa ${a}`,className:"mt-2 w-48 h-32 object-cover rounded-lg border border-gray-300"})]},a)))})]}),(0,$.jsx)("input",{type:"text",name:"numero_celular",placeholder:"N\xfamero de Celular",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"}),(0,$.jsx)("input",{type:"email",name:"correo",placeholder:"Correo Electr\xf3nico",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"}),(0,$.jsx)("input",{type:"text",name:"ciudad",placeholder:"Ciudad",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"}),(0,$.jsx)("textarea",{name:"direccion",placeholder:"Direcci\xf3n",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"}),(0,$.jsx)("textarea",{name:"actividad_economica",placeholder:"Actividad Econ\xf3mica",required:!0,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:border-purple-night focus:ring focus:ring-blue-200"}),(0,$.jsxs)("div",{className:"flex items-center gap-3",children:[(0,$.jsxs)(D,{checked:a,onChange:n,className:"relative inline-flex items-center h-6 w-11 rounded-full transition-colors "+(a?"bg-midnight-blue":"bg-gray-300"),children:[(0,$.jsx)("span",{className:"sr-only",children:"Aceptar t\xe9rminos"}),(0,$.jsx)("span",{className:"inline-block w-4 h-4 transform bg-white rounded-full transition-transform "+(a?"translate-x-6":"translate-x-1")})]}),(0,$.jsx)("p",{className:"text-sm text-gray-600",children:"Debes aceptar los t\xe9rminos y condiciones."})]}),(0,$.jsx)("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-midnight-blue to-purple-night text-white font-semibold rounded-lg shadow-md hover:opacity-90 transition-all",children:s?"Enviando...":"Enviar"})]})]})})}))},342:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(3401),o=(a(2342),a(35)),l=a(1507),n=a(9784),s=a(5043),c=a(3003),i=a(4834),d=a(8017),u=a(579);const p=(0,c.Ng)(null,{check_authenticated:o.f_,load_user:o.Jc,refresh:o.Ow,get_items:l.Su,get_total:l.OL,get_item_total:l.ES,get_user_profile:n.h})((e=>((0,s.useEffect)((()=>{e.refresh(),e.check_authenticated(),e.load_user(),e.get_items(),e.get_total(),e.get_item_total(),e.get_user_profile()}),[]),(0,u.jsxs)("div",{children:[(0,u.jsx)(i.A,{}),(0,u.jsx)(r.N9,{autoClose:5e3}),e.children,(0,u.jsx)(d.A,{})]}))))},1507:(e,t,a)=>{a.d(t,{ES:()=>c,K$:()=>l,OL:()=>s,Su:()=>n,eV:()=>i,j5:()=>d});var r=a(6213),o=a(4308);const l=e=>async t=>{if(localStorage.getItem("access")){const l={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},n=e.id,s=JSON.stringify({product_id:n});try{const e=await r.A.post("http://localhost:8000/api/cart/add-item",s,l);201===e.status?t({type:o.CF,payload:e.data}):t({type:o.J1})}catch(a){t({type:o.J1})}}else{let a=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")));let r=!0;a.map((t=>{e.id.toString()===t.product.id.toString()&&(r=!1)}));const l={product:e,count:1};r&&a.push(l),t({type:o.SJ,payload:a})}},n=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await r.A.get("http://localhost:8000/api/cart/cart-items",a);200===t.status?e({type:o._W,payload:t.data}):e({type:o.BS})}catch(t){e({type:o.BS})}}else e({type:o.K})},s=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await r.A.get("http://localhost:8000/api/cart/get-total",a);200===t.status?e({type:o.oy,payload:t.data}):e({type:o.pp})}catch(t){e({type:o.pp})}}else{let t=0,a=0,r=[];localStorage.getItem("cart")&&(r=JSON.parse(localStorage.getItem("cart")),r.map((e=>{t+=parseFloat(e.product.price)*parseFloat(e.count),a+=parseFloat(e.product.compare_price)*parseFloat(e.count)}))),e({type:o.Kl,payload:[parseFloat(t.toFixed(2)),parseFloat(a.toFixed(2))]})}},c=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await r.A.get("http://localhost:8000/api/cart/get-item-total",a);200===t.status?e({type:o.O5,payload:t.data}):e({type:o.DY})}catch(t){e({type:o.DY})}}else{let t=0;localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart")).length),e({type:o.Ig,payload:t})}},i=(e,t)=>async a=>{if(localStorage.getItem("access")){const n={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},s=e.product.id,c=JSON.stringify({product_id:s,count:t});try{const e=await r.A.put("http://localhost:8000/api/cart/update-item",c,n);200!==e.status||e.data.error?a({type:o.lP}):a({type:o.Qk,payload:e.data})}catch(l){a({type:o.lP})}}else{let r=[];localStorage.getItem("cart")&&(r=JSON.parse(localStorage.getItem("cart")),r.map(((a,o)=>{a.product.id.toString()===e.product.id.toString()&&(r[o].count=parseInt(t))}))),a({type:o.u3,payload:r})}},d=e=>async t=>{if(localStorage.getItem("access")){const l=e.product.id,n=JSON.stringify({product_id:l}),s={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`},data:n};try{const e=await r.A.delete("http://localhost:8000/api/cart/remove-item",s);200===e.status?t({type:o.J0,payload:e.data}):t({type:o.uP})}catch(a){t({type:o.uP})}}else{let a=[],r=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")),a.map((t=>{t.product.id.toString()!==e.product.id.toString()&&r.push(t)}))),t({type:o.Zk,payload:r})}}},9784:(e,t,a)=>{a.d(t,{Y:()=>s,h:()=>n});var r=a(6213),o=a(3115),l=a(4308);const n=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await r.A.get("http://localhost:8000/api/profile/user",a);200===t.status?e({type:l.xC,payload:t.data}):e({type:l.kA})}catch(t){e({type:l.kA})}}},s=(e,t,a,n,s,c,i)=>async d=>{if(localStorage.getItem("access")){const p={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},g=JSON.stringify({address_line_1:e,address_line_2:t,city:a,state_province_region:n,zipcode:s,phone:c,country_region:i});try{const e=await r.A.put("http://localhost:8000/api/profile/update",g,p);200===e.status?(d({type:l.Mf,payload:e.data}),d((0,o.n)("Profile updated successfully","green"))):(d({type:l.TX}),d((0,o.n)("Failed to update profile","red")))}catch(u){d({type:l.TX}),d((0,o.n)("Failed to update profile","red"))}}}},6999:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(5043);const o=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"}))}))}}]);
//# sourceMappingURL=749.dd5dfa17.chunk.js.map