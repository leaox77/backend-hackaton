"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[166],{323:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(5043),n=a(5475),r=a(6566),l=a(214),i=a(3340),o=a(3003),d=a(579);const m=(0,o.Ng)((e=>({user:e.Auth.user})),{})((e=>{var t,a,o,m,c,p,u,x,h,g;let{item:y,count:f,update_item:j,remove_item:v,render:b,setRender:_,setAlert:N,user:w}=e;const[k,A]=(0,s.useState)(1);(0,s.useEffect)((()=>{f&&A(f)}),[f]);return(0,d.jsxs)("li",{className:"flex py-6 sm:py-10",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("img",{src:null===y||void 0===y||null===(t=y.product)||void 0===t?void 0:t.photo,alt:`Imagen del producto ${(null===y||void 0===y||null===(a=y.product)||void 0===a?void 0:a.name)||""}`,className:"w-24 h-24 rounded-md object-center object-cover sm:w-48 sm:h-48"})}),(0,d.jsxs)("div",{className:"ml-4 flex-1 flex flex-col justify-between sm:ml-6",children:[(0,d.jsxs)("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex justify-between",children:(0,d.jsx)("h3",{className:"text-sm",children:(0,d.jsx)(n.N_,{to:`/product/${null===y||void 0===y||null===(o=y.product)||void 0===o?void 0:o.id}`,className:"font-medium text-gray-700 hover:text-gray-800",children:null===y||void 0===y||null===(m=y.product)||void 0===m?void 0:m.name})})}),(0,d.jsx)("div",{className:"mt-1 flex text-sm",children:(0,d.jsx)("p",{className:"text-gray-500",children:"Color"})}),(0,d.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:0===w.mayorista_tipo?`${null===y||void 0===y||null===(c=y.product)||void 0===c?void 0:c.price} Bs`:1===w.mayorista_tipo?`${null===y||void 0===y||null===(p=y.product)||void 0===p?void 0:p.price_mayorista_1} Bs`:2===w.mayorista_tipo?`${null===y||void 0===y||null===(u=y.product)||void 0===u?void 0:u.price_mayorista_2} Bs`:3===w.mayorista_tipo?`${null===y||void 0===y||null===(x=y.product)||void 0===x?void 0:x.price_mayorista_3} Bs`:"N/A"})]}),(0,d.jsxs)("div",{className:"mt-4 sm:mt-0 sm:pr-9",children:[(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{var t;(null===y||void 0===y||null===(t=y.product)||void 0===t?void 0:t.quantity)>=k?(await j(y,k),_(!b)):N("No hay suficiente stock disponible","danger")}catch(a){console.error("Error actualizando el carrito:",a),N("Error al actualizar el producto","danger")}},children:[(0,d.jsx)("select",{name:"item_count",onChange:e=>A(e.target.value),value:k,className:"max-w-full rounded-md border border-gray-300 py-1.5 text-base leading-5 font-medium text-gray-700 text-left shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Array.from({length:(null===y||void 0===y||null===(h=y.product)||void 0===h?void 0:h.quantity)||1},((e,t)=>(0,d.jsx)("option",{value:t+1,children:t+1},t+1)))}),(0,d.jsx)("button",{type:"submit",className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:(0,d.jsx)("span",{className:"mx-2",children:"Actualizar"})})]}),(0,d.jsx)("div",{className:"absolute top-0 right-0",children:(0,d.jsxs)("button",{onClick:async()=>{try{await v(y),_(!b)}catch(e){console.error("Error eliminando el producto:",e)}},className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:[(0,d.jsx)("span",{className:"sr-only",children:"Eliminar"}),(0,d.jsx)(r.A,{className:"h-5 w-5","aria-hidden":"true"})]})})]})]}),(0,d.jsx)("p",{className:"mt-4 flex text-sm text-gray-700 space-x-2",children:(null===y||void 0===y||null===(g=y.product)||void 0===g?void 0:g.quantity)>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"flex-shrink-0 h-5 w-5 text-green-500","aria-hidden":"false","aria-label":"En Stock"}),(0,d.jsx)("span",{children:"En Stock"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{className:"flex-shrink-0 h-5 w-5 text-gray-300","aria-hidden":"false","aria-label":"Agotado"}),(0,d.jsx)("span",{children:"Agotado"})]})})]})]})}))},4166:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(6669),n=a(3216),r=a(3003),l=a(323),i=a(3115),o=a(1507),d=a(5043),m=a(6213),c=a(4308);var p=a(35),u=a(227);var x=a(8767),h=a(9954);const g=[{name:"Sucursal1"},{name:"Sucursal2"},{name:"Sucursal3"},{name:"Sucursal4"},{name:"Sucursal5"}];var y=a(9487),f=a(5475),j=a(579);const v=e=>{let{full_name:t,address_line_1:a,address_line_2:s,state_province_region:n,age:r,telephone_number:l,onChange:i,buy:o,user:m,renderShipping:c,total_amount:p,total_compare_amount:u,estimated_tax:x,shipping_cost:h,shipping_id:v,shipping:b,renderPaymentInfo:_,coupon:N,total_after_coupon:w}=e;return(0,j.jsxs)("section",{"aria-labelledby":"summary-heading",className:"mt-16 bg-gray-100 rounded-lg px-4 py-6 sm:p-6 lg:p-8 lg:mt-0 lg:col-span-5",children:[(0,j.jsx)("h2",{id:"summary-heading",className:"text-lg font-medium text-gray-900",children:"Resumen del pedido"}),(0,j.jsxs)("dl",{className:"mt-6 space-y-4",children:[(0,j.jsx)("div",{className:"flex items-center justify-between",children:c()}),N&&null!==N&&void 0!==N?(0,j.jsxs)("div",{className:"text-blue-500",children:["Cup\xf3n: ",N.name," aplicadoo."]}):(0,j.jsx)(d.Fragment,{}),(0,j.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,j.jsxs)("dt",{className:"flex items-center text-sm text-gray-600",children:[(0,j.jsx)("span",{children:"Estimaci\xf3n de env\xedo"}),(0,j.jsxs)(f.N_,{to:"",className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-500",children:[(0,j.jsx)("span",{className:"sr-only",children:"Obtener m\xe1s informaci\xf3n sobre c\xf3mo se calcula el env\xedo"}),(0,j.jsx)(y.A,{className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,j.jsx)("dd",{className:"text-sm font-medium text-gray-900",children:b&&0!==v?(0,j.jsxs)(j.Fragment,{children:["Bs",h]}):(0,j.jsx)("div",{className:"text-red-500",children:"(Por favor seleccione la opci\xf3n de env\xedo)"})})]}),(0,j.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,j.jsxs)("dt",{className:"flex text-sm text-gray-600",children:[(0,j.jsx)("span",{children:"Estimaci\xf3n de Impuestos"}),(0,j.jsxs)(f.N_,{to:"",className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-500",children:[(0,j.jsx)("span",{className:"sr-only",children:"Obtener m\xe1s informaci\xf3n sobre c\xf3mo se calculan los impuestos"}),(0,j.jsx)(y.A,{className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,j.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[x,"Bs"]})]}),(0,j.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,j.jsx)("dt",{className:"flex text-sm text-gray-600",children:(0,j.jsx)("span",{children:"Subtotal"})}),(0,j.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[u,"Bs"]})]}),N&&null!==N&&void 0!==N?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,j.jsx)("dt",{className:"flex text-sm text-gray-600",children:(0,j.jsx)("span",{children:"Descuento total: "})}),(0,j.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[w,"Bs"]})]}),(0,j.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,j.jsx)("dt",{className:"text-base font-medium text-gray-900",children:"Total del pedido"}),(0,j.jsxs)("dd",{className:"text-base font-medium text-gray-900",children:[p,"Bs"]})]})]}):(0,j.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,j.jsx)("dt",{className:"text-base font-medium text-gray-900",children:"Total del pedido"}),(0,j.jsxs)("dd",{className:"text-base font-medium text-gray-900",children:[p,"Bs"]})]})]}),(0,j.jsxs)("form",{onSubmit:e=>o(e),children:[(0,j.jsx)("div",{className:" px-4 py-5  mt-4 sm:px-6",children:(0,j.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Direcci\xf3n de env\xedo:"})}),(0,j.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,j.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Nombre completo"}),(0,j.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,j.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,j.jsx)("input",{type:"text",name:"full_name",placeholder:`${m.first_name} ${m.last_name}`,onChange:e=>i(e),value:t,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300"})})})]}),(0,j.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,j.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2 ",children:"Direcci\xf3n 1*"}),(0,j.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,j.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,j.jsx)("input",{type:"text",name:"address_line_1",onChange:e=>i(e),value:a,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,j.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,j.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Direcci\xf3n 2*"}),(0,j.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,j.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,j.jsx)("input",{type:"text",name:"address_line_2",onChange:e=>i(e),value:s,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,j.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,j.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Estado/Provincia*"}),(0,j.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,j.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,j.jsx)("input",{type:"text",name:"state_province_region",onChange:e=>i(e),value:n,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,j.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,j.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Edad"}),(0,j.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,j.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,j.jsx)("input",{type:"number",name:"age",onChange:e=>i(e),value:r,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Sucursales"}),(0,j.jsx)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:(0,j.jsx)("div",{className:"sm:col-span-2",children:(0,j.jsxs)("select",{id:"city",name:"city",onChange:e=>i(e),className:"max-w-lg block focus:ring-midnight-blue focus:border-midnight-blue w-full shadow-sm sm:max-w-xs sm:text-sm border-gray-300 rounded-md",defaultValue:"",children:[(0,j.jsx)("option",{value:"",disabled:!0,children:"Escoge tu sucursal"}),g&&g.map(((e,t)=>(0,j.jsx)("option",{value:e.name,children:e.name},t)))]})})})]}),(0,j.jsxs)("div",{className:"sm:grid sm:grid-cols-3 mb-4 sm:gap-4 sm:items-start  sm:border-gray-200 sm:pt-5",children:[(0,j.jsx)("label",{htmlFor:"telephone_number",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Celular*"}),(0,j.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,j.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,j.jsx)("input",{type:"tel",name:"telephone_number",onChange:e=>i(e),value:l,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),_()]})]})};var b=a(1614);const _=(0,r.Ng)((e=>({isAuthenticated:e.Auth.isAuthenticated,user:e.Auth.user,items:e.Cart.items,total_items:e.Cart.total_items,shipping:e.Shipping.shipping,clientToken:e.Payment.clientToken,made_payment:e.Payment.made_payment,loading:e.Payment.loading,original_price:e.Payment.original_price,total_after_coupon:e.Payment.total_after_coupon,total_amount:e.Payment.total_amount,total_compare_amount:e.Payment.total_compare_amount,estimated_tax:e.Payment.estimated_tax,shipping_cost:e.Payment.shipping_cost,coupon:e.Coupons.coupon,reference:e.PaymentQR.reference,qrData:e.PaymentQR.qrData,qrLoading:e.PaymentQR.loading,paymentStatus:e.PaymentQR.paymentStatus})),{update_item:o.eV,remove_item:o.j5,setAlert:i.n,get_shipping_options:()=>async e=>{const t={headers:{Accept:"application/json"}};try{const a=await m.A.get("http://localhost:8000/api/shipping/get-shipping-options",t);200===a.status?e({type:c.pb,payload:a.data}):e({type:c.q4})}catch(a){e({type:c.q4})}},refresh:p.Ow,get_payment_total:u.Dw,get_client_token:u.nx,process_payment:u.Jf,check_coupon:e=>async t=>{const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const s=await m.A.get(`http://localhost:8000/api/coupons/check-coupon?coupon_name=${e}`,a);200===s.status?(t({type:c.MK,payload:s.data}),t((0,i.n)("Coupon applied","green"))):(t({type:c.Tc}),s.data.error?t((0,i.n)(s.data.error,"red")):t((0,i.n)("This coupon does not exist","red")))}catch(s){t({type:c.Tc}),t((0,i.n)("This coupon does not exist","red"))}window.scrollTo(0,0)},set_reference:e=>({type:c.$P,payload:e}),generate_qr_payment:(e,t)=>async a=>{a({type:c.oB,payload:!0});const s={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{var n,r;const l=await m.A.post("http://localhost:8000/api/qr_payment/generate-qr/",{amount:e,reference:t},s);null!==(n=l.data)&&void 0!==n&&n.qr_code_url&&null!==(r=l.data)&&void 0!==r&&r.reference&&a({type:c.u6,payload:l.data})}catch(l){alert("Fallo en la generaci\xf3n del QR")}a({type:c.oB,payload:!1})},verify_payment:()=>async(e,t)=>{const{qrData:a,paymentStatus:s}=t().PaymentQR;if(!a||!a.reference||"paid"===s)return;const n={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{var r;null!==(r=(await m.A.post("http://localhost:8000/api/qr_payment/verify-payment/",{reference:a.reference},n)).data)&&void 0!==r&&r.success&&e({type:c.Xp,payload:"paid"})}catch(l){console.error("Verificaci\xf3n fallida:",l)}}})((e=>{let{isAuthenticated:t,items:a,update_item:r,remove_item:i,setAlert:o,get_shipping_options:m,shipping:c,get_payment_total:p,get_client_token:u,process_payment:y,user:f,clientToken:_,made_payment:N,loading:w,total_after_coupon:k,total_compare_amount:A,estimated_tax:S,shipping_cost:C,check_coupon:q,coupon:P,reference:E,qrData:$,qrLoading:T,paymentStatus:F,set_reference:R,generate_qr_payment:B,verify_payment:I}=e;const[D,z]=(0,d.useState)({full_name:"",address_line_1:"",address_line_2:"",city:"",state_province_region:"",age:"0",telephone_number:"",coupon_name:"0",shipping_id:0}),[Q,J]=(0,d.useState)({instance:{}}),[W,M]=(0,d.useState)("braintree"),[O,V]=(0,d.useState)(!1),[L,G]=(0,d.useState)(""),[K,X]=(0,d.useState)(!1),{full_name:H,address_line_1:U,address_line_2:Y,city:Z,state_province_region:ee,age:te,telephone_number:ae,coupon_name:se,shipping_id:ne}=D,re=e=>z({...D,[e.target.name]:e.target.value}),le=a&&0!==a.length?a.reduce(((e,t)=>{var a,s,n,r;let l=(null===(a=t.product)||void 0===a?void 0:a.price)||0;return 1===(null===f||void 0===f?void 0:f.mayorista_tipo)?l=(null===(s=t.product)||void 0===s?void 0:s.price_mayorista_1)||l:2===(null===f||void 0===f?void 0:f.mayorista_tipo)?l=(null===(n=t.product)||void 0===n?void 0:n.price_mayorista_2)||l:3===(null===f||void 0===f?void 0:f.mayorista_tipo)&&(l=(null===(r=t.product)||void 0===r?void 0:r.price_mayorista_3)||l),e+l*t.count}),0):0,ie=async e=>{e.preventDefault();let t=await Q.instance.requestPaymentMethod();const a=P?P.name:"";y(t,ne,a,H,U,Y,Z,ee,te,ae)},oe=()=>{if(!E.trim())return void o("Por favor, ingresa una referencia v\xe1lida.","error");B(k||le,E),V(!0)},de=()=>{const e="qr-payment-completed-"+Date.now(),t=P?P.name:"";y(e,ne,t,H,U,Y,Z,ee,te,ae,"qr"),R("")};if((0,d.useEffect)((()=>{window.scrollTo(0,0),m()}),[m]),(0,d.useEffect)((()=>{u()}),[f,u]),(0,d.useEffect)((()=>{p(ne,P?P.name:"default")}),[ne,P,p]),(0,d.useEffect)((()=>{if(!$||!$.reference||"pending"!==F)return;const e=setInterval((()=>I()),5e3);return()=>clearInterval(e)}),[$,F,I]),(0,d.useEffect)((()=>{const e="REF-"+Math.floor(1e6*Math.random());G(e)}),[]),!t)return(0,j.jsx)(n.C5,{to:"/"});if(N)return(0,j.jsx)(n.C5,{to:"/thankyou"});const me=()=>{const e=E.replace(L+"_","");return(0,j.jsxs)("div",{className:"mt-4",children:[(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{htmlFor:"reference",className:"block text-sm font-medium text-gray-700",children:"Referencia del pago"}),(0,j.jsx)("input",{type:"text",id:"reference",placeholder:"Ej. pedido-john",value:e,onChange:e=>R(`${L}_${e.target.value}`),className:"w-full px-4 py-2 border rounded-lg mt-1"})]}),(0,j.jsx)("button",{onClick:oe,disabled:T,className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none",children:T?"Generando QR...":"Generar QR de pago"}),O&&$&&(0,j.jsxs)("div",{className:"mt-6 flex flex-col items-center",children:[(0,j.jsx)(b.X,{value:`Monto: ${k||le} BOB, Referencia: ${E}`,size:200}),(0,j.jsxs)("p",{className:"mt-4 text-lg font-semibold",children:["Referencia: ",E]}),(0,j.jsxs)("p",{className:"text-lg font-semibold",children:["Estado:",(0,j.jsx)("span",{className:`ml-2 px-3 py-1 rounded-full ${"pending"===F?"bg-yellow-500":"paid"===F?"bg-green-500":"bg-red-500"} text-white`,children:"pending"===F?"Pendiente":"paid"===F?"Pagado":"Fallido"})]}),"pending"===F&&(0,j.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Escanea el QR para pagar. Verificando autom\xe1ticamente..."}),"paid"===F&&(0,j.jsx)("button",{onClick:de,className:"mt-4 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded",children:"Verificar y completar compra"}),"failed"===F&&(0,j.jsx)("p",{className:"mt-4 text-red-600 font-medium",children:"\u26a0\ufe0f El pago ha fallado. Intenta nuevamente."})]})]})};return(0,j.jsx)(s.A,{children:(0,j.jsx)("div",{className:"bg-white",children:(0,j.jsxs)("div",{className:"max-w-2xl mx-auto pt-16 pb-24 px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:[(0,j.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Checkout"}),(0,j.jsxs)("div",{className:"mt-12 lg:grid lg:grid-cols-12 lg:gap-x-12 lg:items-start xl:gap-x-16",children:[(0,j.jsxs)("section",{"aria-labelledby":"cart-heading",className:"lg:col-span-7",children:[(0,j.jsx)("h2",{id:"cart-heading",className:"sr-only",children:"Art\xedculos en su carrito"}),(0,j.jsx)("ul",{className:"border-t border-b border-gray-200 divide-y divide-gray-200",children:(0,j.jsx)("div",{children:(null===a||void 0===a?void 0:a.length)>0&&a.map(((e,t)=>(0,j.jsx)(l.A,{item:e,count:e.count,update_item:r,remove_item:i,render:K,setRender:X,setAlert:o},t)))})})]}),(0,j.jsx)(v,{full_name:H,address_line_1:U,address_line_2:Y,city:g,state_province_region:ee,age:te,telephone_number:ae,onChange:re,buy:ie,user:f,renderShipping:()=>{if(c)return(0,j.jsx)("div",{className:"mb-5",children:c.map(((e,t)=>(0,j.jsxs)("div",{children:[(0,j.jsx)("input",{onChange:re,value:e.id,name:"shipping_id",type:"radio",required:!0}),(0,j.jsxs)("label",{className:"ml-4",children:[e.name," - Bs",e.price," (",e.time_to_delivery,")"]})]},t)))})},total_amount:le,total_after_coupon:k,total_compare_amount:A,estimated_tax:S,shipping_cost:C,shipping_id:ne,shipping:c,renderPaymentInfo:()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"M\xe9todo de pago"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("input",{id:"payment-method-qr",name:"payment-method",type:"radio",checked:"qr"===W,onChange:()=>M("qr"),className:"mr-2"}),(0,j.jsx)("label",{htmlFor:"payment-method-qr",className:"text-gray-700",children:"Pago con QR"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("input",{id:"payment-method-braintree",name:"payment-method",type:"radio",checked:"braintree"===W,onChange:()=>M("braintree"),className:"mr-2"}),(0,j.jsx)("label",{htmlFor:"payment-method-braintree",className:"text-gray-700",children:"Pago con tarjeta"})]})]}),"qr"===W?me():_?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.A,{options:{authorization:_,paypal:{flow:"vault"}},onInstance:e=>J({instance:e})}),(0,j.jsx)("div",{className:"mt-6",children:w?(0,j.jsx)("button",{className:"w-full bg-midnight-blue text-white py-3 px-4 rounded",children:(0,j.jsx)(h.BM,{color:"#fff",height:20,width:20})}):(0,j.jsx)("button",{type:"submit",onClick:ie,className:"w-full bg-midnight-blue hover:bg-purple-night text-white py-3 px-4 rounded",children:"Realizar Pedido"})})]}):(0,j.jsx)("button",{className:"w-full bg-gray-600 text-white py-3 px-4 rounded",children:"Generando token..."})]}),coupon:P,apply_coupon:async e=>{e.preventDefault(),q(se)},coupon_name:se})]})]})})})}))},227:(e,t,a)=>{a.d(t,{Dw:()=>i,Jf:()=>d,cL:()=>m,nx:()=>o});var s=a(6213),n=a(3115),r=a(1507),l=a(4308);const i=(e,t)=>async a=>{const n={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const r=await s.A.get(`http://localhost:8000/api/payment/get-payment-total?shipping_id=${e}&coupon_name=${t}`,n);200!==r.status||r.data.error?a({type:l.Wi}):a({type:l.TK,payload:r.data})}catch(r){a({type:l.Wi})}},o=()=>async e=>{const t={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const a=await s.A.get("http://localhost:8000/api/payment/get-token",t);200===a.status?e({type:l.IS,payload:a.data}):e({type:l.dx})}catch(a){e({type:l.dx})}},d=(e,t,a,i,o,d,m,c,p,u)=>async x=>{const h={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},g=JSON.stringify({nonce:e,shipping_id:t,coupon_name:a,full_name:i,address_line_1:o,address_line_2:d,city:m,state_province_region:c,age:p,telephone_number:u});x({type:l.Px});try{const e=await s.A.post("http://localhost:8000/api/payment/make-payment",g,h);200===e.status&&e.data.success?(x({type:l.$t}),x((0,n.n)(e.data.success,"green")),x((0,r.ES)())):(x({type:l.gm}),x((0,n.n)(e.data.error,"red")))}catch(y){x({type:l.gm}),x((0,n.n)("Error processing payment","red"))}x({type:l.L_}),window.scrollTo(0,0)},m=()=>e=>{e({type:l.P0})}}}]);
//# sourceMappingURL=166.9414147f.chunk.js.map