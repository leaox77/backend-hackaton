"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[8],{323:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(5043),r=a(5475),n=a(6566),o=a(214),l=a(3340),i=a(3003),c=a(579);const d=(0,i.Ng)((e=>({user:e.Auth.user})),{})((e=>{var t,a,i,d,m,p,u,g,h,x;let{item:y,count:f,update_item:_,remove_item:j,render:v,setRender:b,setAlert:N,user:w}=e;const[S,A]=(0,s.useState)(1);(0,s.useEffect)((()=>{f&&A(f)}),[f]);return(0,c.jsxs)("li",{className:"flex py-6 sm:py-10",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)("img",{src:null===y||void 0===y||null===(t=y.product)||void 0===t?void 0:t.photo,alt:`Imagen del producto ${(null===y||void 0===y||null===(a=y.product)||void 0===a?void 0:a.name)||""}`,className:"w-24 h-24 rounded-md object-center object-cover sm:w-48 sm:h-48"})}),(0,c.jsxs)("div",{className:"ml-4 flex-1 flex flex-col justify-between sm:ml-6",children:[(0,c.jsxs)("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"flex justify-between",children:(0,c.jsx)("h3",{className:"text-sm",children:(0,c.jsx)(r.N_,{to:`/product/${null===y||void 0===y||null===(i=y.product)||void 0===i?void 0:i.id}`,className:"font-medium text-gray-700 hover:text-gray-800",children:null===y||void 0===y||null===(d=y.product)||void 0===d?void 0:d.name})})}),(0,c.jsx)("div",{className:"mt-1 flex text-sm",children:(0,c.jsx)("p",{className:"text-gray-500",children:"Color"})}),(0,c.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:0===w.mayorista_tipo?`${null===y||void 0===y||null===(m=y.product)||void 0===m?void 0:m.price} Bs`:1===w.mayorista_tipo?`${null===y||void 0===y||null===(p=y.product)||void 0===p?void 0:p.price_mayorista_1} Bs`:2===w.mayorista_tipo?`${null===y||void 0===y||null===(u=y.product)||void 0===u?void 0:u.price_mayorista_2} Bs`:3===w.mayorista_tipo?`${null===y||void 0===y||null===(g=y.product)||void 0===g?void 0:g.price_mayorista_3} Bs`:"N/A"})]}),(0,c.jsxs)("div",{className:"mt-4 sm:mt-0 sm:pr-9",children:[(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{var t;(null===y||void 0===y||null===(t=y.product)||void 0===t?void 0:t.quantity)>=S?(await _(y,S),b(!v)):N("No hay suficiente stock disponible","danger")}catch(a){console.error("Error actualizando el carrito:",a),N("Error al actualizar el producto","danger")}},children:[(0,c.jsx)("select",{name:"item_count",onChange:e=>A(e.target.value),value:S,className:"max-w-full rounded-md border border-gray-300 py-1.5 text-base leading-5 font-medium text-gray-700 text-left shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Array.from({length:(null===y||void 0===y||null===(h=y.product)||void 0===h?void 0:h.quantity)||1},((e,t)=>(0,c.jsx)("option",{value:t+1,children:t+1},t+1)))}),(0,c.jsx)("button",{type:"submit",className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:(0,c.jsx)("span",{className:"mx-2",children:"Actualizar"})})]}),(0,c.jsx)("div",{className:"absolute top-0 right-0",children:(0,c.jsxs)("button",{onClick:async()=>{try{await j(y),b(!v)}catch(e){console.error("Error eliminando el producto:",e)}},className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:[(0,c.jsx)("span",{className:"sr-only",children:"Eliminar"}),(0,c.jsx)(n.A,{className:"h-5 w-5","aria-hidden":"true"})]})})]})]}),(0,c.jsx)("p",{className:"mt-4 flex text-sm text-gray-700 space-x-2",children:(null===y||void 0===y||null===(x=y.product)||void 0===x?void 0:x.quantity)>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.A,{className:"flex-shrink-0 h-5 w-5 text-green-500","aria-hidden":"false","aria-label":"En Stock"}),(0,c.jsx)("span",{children:"En Stock"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.A,{className:"flex-shrink-0 h-5 w-5 text-gray-300","aria-hidden":"false","aria-label":"Agotado"}),(0,c.jsx)("span",{children:"Agotado"})]})})]})]})}))},4166:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(342),r=a(3216),n=a(3003),o=a(323),l=a(3115),i=a(1507),c=a(5043),d=a(6213),m=a(4308);var p=a(35),u=a(227);var g=a(8767),h=a(9954);const x=[{name:"Sucursal1"},{name:"Sucursal2"},{name:"Sucursal3"},{name:"Sucursal4"},{name:"Sucursal5"}];var y=a(9487),f=a(5475),_=a(579);const j=e=>{let{full_name:t,address_line_1:a,address_line_2:s,state_province_region:r,age:n,telephone_number:o,onChange:l,buy:i,user:d,renderShipping:m,total_amount:p,total_compare_amount:u,estimated_tax:g,shipping_cost:h,shipping_id:j,shipping:v,renderPaymentInfo:b,coupon:N,total_after_coupon:w}=e;return(0,_.jsxs)("section",{"aria-labelledby":"summary-heading",className:"mt-16 bg-gray-100 rounded-lg px-4 py-6 sm:p-6 lg:p-8 lg:mt-0 lg:col-span-5",children:[(0,_.jsx)("h2",{id:"summary-heading",className:"text-lg font-medium text-gray-900",children:"Resumen del pedido"}),(0,_.jsxs)("dl",{className:"mt-6 space-y-4",children:[(0,_.jsx)("div",{className:"flex items-center justify-between",children:m()}),N&&null!==N&&void 0!==N?(0,_.jsxs)("div",{className:"text-blue-500",children:["Cup\xf3n: ",N.name," aplicadoo."]}):(0,_.jsx)(c.Fragment,{}),(0,_.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,_.jsxs)("dt",{className:"flex items-center text-sm text-gray-600",children:[(0,_.jsx)("span",{children:"Estimaci\xf3n de env\xedo"}),(0,_.jsxs)(f.N_,{to:"",className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-500",children:[(0,_.jsx)("span",{className:"sr-only",children:"Obtener m\xe1s informaci\xf3n sobre c\xf3mo se calcula el env\xedo"}),(0,_.jsx)(y.A,{className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,_.jsx)("dd",{className:"text-sm font-medium text-gray-900",children:v&&0!==j?(0,_.jsxs)(_.Fragment,{children:["Bs",h]}):(0,_.jsx)("div",{className:"text-red-500",children:"(Por favor seleccione la opci\xf3n de env\xedo)"})})]}),(0,_.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,_.jsxs)("dt",{className:"flex text-sm text-gray-600",children:[(0,_.jsx)("span",{children:"Estimaci\xf3n de Impuestos"}),(0,_.jsxs)(f.N_,{to:"",className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-500",children:[(0,_.jsx)("span",{className:"sr-only",children:"Obtener m\xe1s informaci\xf3n sobre c\xf3mo se calculan los impuestos"}),(0,_.jsx)(y.A,{className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,_.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[g,"Bs"]})]}),(0,_.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,_.jsx)("dt",{className:"flex text-sm text-gray-600",children:(0,_.jsx)("span",{children:"Subtotal"})}),(0,_.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[u,"Bs"]})]}),N&&null!==N&&void 0!==N?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,_.jsx)("dt",{className:"flex text-sm text-gray-600",children:(0,_.jsx)("span",{children:"Descuento total: "})}),(0,_.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[w,"Bs"]})]}),(0,_.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,_.jsx)("dt",{className:"text-base font-medium text-gray-900",children:"Total del pedido"}),(0,_.jsxs)("dd",{className:"text-base font-medium text-gray-900",children:[p,"Bs"]})]})]}):(0,_.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,_.jsx)("dt",{className:"text-base font-medium text-gray-900",children:"Total del pedido"}),(0,_.jsxs)("dd",{className:"text-base font-medium text-gray-900",children:[p,"Bs"]})]})]}),(0,_.jsxs)("form",{onSubmit:e=>i(e),children:[(0,_.jsx)("div",{className:" px-4 py-5  mt-4 sm:px-6",children:(0,_.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Direcci\xf3n de env\xedo:"})}),(0,_.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,_.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Nombre completo"}),(0,_.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,_.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,_.jsx)("input",{type:"text",name:"full_name",placeholder:`${d.first_name} ${d.last_name}`,onChange:e=>l(e),value:t,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300"})})})]}),(0,_.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,_.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2 ",children:"Direcci\xf3n 1*"}),(0,_.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,_.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,_.jsx)("input",{type:"text",name:"address_line_1",onChange:e=>l(e),value:a,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,_.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,_.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Direcci\xf3n 2*"}),(0,_.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,_.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,_.jsx)("input",{type:"text",name:"address_line_2",onChange:e=>l(e),value:s,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,_.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,_.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Estado/Provincia*"}),(0,_.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,_.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,_.jsx)("input",{type:"text",name:"state_province_region",onChange:e=>l(e),value:r,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,_.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:[(0,_.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Edad"}),(0,_.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,_.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,_.jsx)("input",{type:"number",name:"age",onChange:e=>l(e),value:n,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Sucursales"}),(0,_.jsx)("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-gray-200 sm:pt-5",children:(0,_.jsx)("div",{className:"sm:col-span-2",children:(0,_.jsxs)("select",{id:"city",name:"city",onChange:e=>l(e),className:"max-w-lg block focus:ring-midnight-blue focus:border-midnight-blue w-full shadow-sm sm:max-w-xs sm:text-sm border-gray-300 rounded-md",defaultValue:"",children:[(0,_.jsx)("option",{value:"",disabled:!0,children:"Escoge tu sucursal"}),x&&x.map(((e,t)=>(0,_.jsx)("option",{value:e.name,children:e.name},t)))]})})})]}),(0,_.jsxs)("div",{className:"sm:grid sm:grid-cols-3 mb-4 sm:gap-4 sm:items-start  sm:border-gray-200 sm:pt-5",children:[(0,_.jsx)("label",{htmlFor:"telephone_number",className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:"Celular*"}),(0,_.jsx)("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:(0,_.jsx)("div",{className:"max-w-lg flex rounded-md shadow-sm",children:(0,_.jsx)("input",{type:"tel",name:"telephone_number",onChange:e=>l(e),value:o,required:!0,className:"flex-1 block w-full focus:ring-midnight-blue focus:border-midnight-blue min-w-0 rounded-md sm:text-sm border-gray-300 px-2"})})})]}),b()]})]})};var v=a(1614);const b=(0,n.Ng)((e=>({isAuthenticated:e.Auth.isAuthenticated,user:e.Auth.user,items:e.Cart.items,total_items:e.Cart.total_items,shipping:e.Shipping.shipping,clientToken:e.Payment.clientToken,made_payment:e.Payment.made_payment,loading:e.Payment.loading,original_price:e.Payment.original_price,total_after_coupon:e.Payment.total_after_coupon,total_amount:e.Payment.total_amount,total_compare_amount:e.Payment.total_compare_amount,estimated_tax:e.Payment.estimated_tax,shipping_cost:e.Payment.shipping_cost,coupon:e.Coupons.coupon,reference:e.PaymentQR.reference,qrData:e.PaymentQR.qrData,qrLoading:e.PaymentQR.loading,paymentStatus:e.PaymentQR.paymentStatus})),{update_item:i.eV,remove_item:i.j5,setAlert:l.n,get_shipping_options:()=>async e=>{const t={headers:{Accept:"application/json"}};try{const a=await d.A.get("http://localhost:8000/api/shipping/get-shipping-options",t);200===a.status?e({type:m.pb,payload:a.data}):e({type:m.q4})}catch(a){e({type:m.q4})}},refresh:p.Ow,get_payment_total:u.Dw,get_client_token:u.nx,process_payment:u.Jf,check_coupon:e=>async t=>{const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const s=await d.A.get(`http://localhost:8000/api/coupons/check-coupon?coupon_name=${e}`,a);200===s.status?(t({type:m.MK,payload:s.data}),t((0,l.n)("Coupon applied","green"))):(t({type:m.Tc}),s.data.error?t((0,l.n)(s.data.error,"red")):t((0,l.n)("This coupon does not exist","red")))}catch(s){t({type:m.Tc}),t((0,l.n)("This coupon does not exist","red"))}window.scrollTo(0,0)},set_reference:e=>({type:m.$P,payload:e}),generate_qr_payment:(e,t)=>async a=>{a({type:m.oB,payload:!0});const s={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{var r,n;const o=await d.A.post("http://localhost:8000/api/qr_payment/generate-qr/",{amount:e,reference:t},s);null!==(r=o.data)&&void 0!==r&&r.qr_code_url&&null!==(n=o.data)&&void 0!==n&&n.reference&&a({type:m.u6,payload:o.data})}catch(o){alert("Fallo en la generaci\xf3n del QR")}a({type:m.oB,payload:!1})},verify_payment:()=>async(e,t)=>{const{qrData:a,paymentStatus:s}=t().PaymentQR;if(!a||!a.reference||"paid"===s)return;const r={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{var n;null!==(n=(await d.A.post("http://localhost:8000/api/qr_payment/verify-payment/",{reference:a.reference},r)).data)&&void 0!==n&&n.success&&e({type:m.Xp,payload:"paid"})}catch(o){console.error("Verificaci\xf3n fallida:",o)}}})((e=>{let{isAuthenticated:t,items:a,update_item:n,remove_item:l,setAlert:i,get_shipping_options:d,shipping:m,get_payment_total:p,get_client_token:u,process_payment:y,user:f,clientToken:b,made_payment:N,loading:w,total_after_coupon:S,total_compare_amount:A,estimated_tax:k,shipping_cost:I,check_coupon:C,coupon:T,reference:P,qrData:$,qrLoading:q,paymentStatus:F,set_reference:J,generate_qr_payment:E,verify_payment:z}=e;const[B,O]=(0,c.useState)({full_name:"",address_line_1:"",address_line_2:"",city:"",state_province_region:"",age:"0",telephone_number:"",coupon_name:"0",shipping_id:0}),[R,W]=(0,c.useState)({instance:{}}),[D,Q]=(0,c.useState)("braintree"),[M,L]=(0,c.useState)(!1),[V,K]=(0,c.useState)(""),[X,G]=(0,c.useState)(!1),{full_name:Y,address_line_1:Z,address_line_2:H,city:U,state_province_region:ee,age:te,telephone_number:ae,coupon_name:se,shipping_id:re}=B,ne=e=>O({...B,[e.target.name]:e.target.value}),oe=a&&0!==a.length?a.reduce(((e,t)=>{var a,s,r,n;let o=(null===(a=t.product)||void 0===a?void 0:a.price)||0;return 1===(null===f||void 0===f?void 0:f.mayorista_tipo)?o=(null===(s=t.product)||void 0===s?void 0:s.price_mayorista_1)||o:2===(null===f||void 0===f?void 0:f.mayorista_tipo)?o=(null===(r=t.product)||void 0===r?void 0:r.price_mayorista_2)||o:3===(null===f||void 0===f?void 0:f.mayorista_tipo)&&(o=(null===(n=t.product)||void 0===n?void 0:n.price_mayorista_3)||o),e+o*t.count}),0):0,le=async e=>{e.preventDefault();let t=await R.instance.requestPaymentMethod();const a=T?T.name:"";y(t,re,a,Y,Z,H,U,ee,te,ae)},ie=()=>{if(!P.trim())return void i("Por favor, ingresa una referencia v\xe1lida.","error");E(S||oe,P),L(!0)},ce=()=>{const e="qr-payment-completed-"+Date.now(),t=T?T.name:"";y(e,re,t,Y,Z,H,U,ee,te,ae,"qr"),J("")};if((0,c.useEffect)((()=>{window.scrollTo(0,0),d()}),[d]),(0,c.useEffect)((()=>{u()}),[f,u]),(0,c.useEffect)((()=>{p(re,T?T.name:"default")}),[re,T,p]),(0,c.useEffect)((()=>{if(!$||!$.reference||"pending"!==F)return;const e=setInterval((()=>z()),5e3);return()=>clearInterval(e)}),[$,F,z]),(0,c.useEffect)((()=>{const e="REF-"+Math.floor(1e6*Math.random());K(e)}),[]),!t)return(0,_.jsx)(r.C5,{to:"/"});if(N)return(0,_.jsx)(r.C5,{to:"/thankyou"});const de=()=>{const e=P.replace(V+"_","");return(0,_.jsxs)("div",{className:"mt-4",children:[(0,_.jsxs)("div",{className:"mb-4",children:[(0,_.jsx)("label",{htmlFor:"reference",className:"block text-sm font-medium text-gray-700",children:"Referencia del pago"}),(0,_.jsx)("input",{type:"text",id:"reference",placeholder:"Ej. pedido-john",value:e,onChange:e=>J(`${V}_${e.target.value}`),className:"w-full px-4 py-2 border rounded-lg mt-1"})]}),(0,_.jsx)("button",{onClick:ie,disabled:q,className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none",children:q?"Generando QR...":"Generar QR de pago"}),M&&$&&(0,_.jsxs)("div",{className:"mt-6 flex flex-col items-center",children:[(0,_.jsx)(v.X,{value:`Monto: ${S||oe} BOB, Referencia: ${P}`,size:200}),(0,_.jsxs)("p",{className:"mt-4 text-lg font-semibold",children:["Referencia: ",P]}),(0,_.jsxs)("p",{className:"text-lg font-semibold",children:["Estado:",(0,_.jsx)("span",{className:`ml-2 px-3 py-1 rounded-full ${"pending"===F?"bg-yellow-500":"paid"===F?"bg-green-500":"bg-red-500"} text-white`,children:"pending"===F?"Pendiente":"paid"===F?"Pagado":"Fallido"})]}),"pending"===F&&(0,_.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Escanea el QR para pagar. Verificando autom\xe1ticamente..."}),"paid"===F&&(0,_.jsx)("button",{onClick:ce,className:"mt-4 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded",children:"Verificar y completar compra"}),"failed"===F&&(0,_.jsx)("p",{className:"mt-4 text-red-600 font-medium",children:"\u26a0\ufe0f El pago ha fallado. Intenta nuevamente."})]})]})};return(0,_.jsx)(s.A,{children:(0,_.jsx)("div",{className:"bg-white",children:(0,_.jsxs)("div",{className:"max-w-2xl mx-auto pt-16 pb-24 px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:[(0,_.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Checkout"}),(0,_.jsxs)("div",{className:"mt-12 lg:grid lg:grid-cols-12 lg:gap-x-12 lg:items-start xl:gap-x-16",children:[(0,_.jsxs)("section",{"aria-labelledby":"cart-heading",className:"lg:col-span-7",children:[(0,_.jsx)("h2",{id:"cart-heading",className:"sr-only",children:"Art\xedculos en su carrito"}),(0,_.jsx)("ul",{className:"border-t border-b border-gray-200 divide-y divide-gray-200",children:(0,_.jsx)("div",{children:(null===a||void 0===a?void 0:a.length)>0&&a.map(((e,t)=>(0,_.jsx)(o.A,{item:e,count:e.count,update_item:n,remove_item:l,render:X,setRender:G,setAlert:i},t)))})})]}),(0,_.jsx)(j,{full_name:Y,address_line_1:Z,address_line_2:H,city:x,state_province_region:ee,age:te,telephone_number:ae,onChange:ne,buy:le,user:f,renderShipping:()=>{if(m)return(0,_.jsx)("div",{className:"mb-5",children:m.map(((e,t)=>(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{onChange:ne,value:e.id,name:"shipping_id",type:"radio",required:!0}),(0,_.jsxs)("label",{className:"ml-4",children:[e.name," - Bs",e.price," (",e.time_to_delivery,")"]})]},t)))})},total_amount:oe,total_after_coupon:S,total_compare_amount:A,estimated_tax:k,shipping_cost:I,shipping_id:re,shipping:m,renderPaymentInfo:()=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"mb-5",children:[(0,_.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"M\xe9todo de pago"}),(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{id:"payment-method-qr",name:"payment-method",type:"radio",checked:"qr"===D,onChange:()=>Q("qr"),className:"mr-2"}),(0,_.jsx)("label",{htmlFor:"payment-method-qr",className:"text-gray-700",children:"Pago con QR"})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{id:"payment-method-braintree",name:"payment-method",type:"radio",checked:"braintree"===D,onChange:()=>Q("braintree"),className:"mr-2"}),(0,_.jsx)("label",{htmlFor:"payment-method-braintree",className:"text-gray-700",children:"Pago con tarjeta"})]})]}),"qr"===D?de():b?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.A,{options:{authorization:b,paypal:{flow:"vault"}},onInstance:e=>W({instance:e})}),(0,_.jsx)("div",{className:"mt-6",children:w?(0,_.jsx)("button",{className:"w-full bg-midnight-blue text-white py-3 px-4 rounded",children:(0,_.jsx)(h.BM,{color:"#fff",height:20,width:20})}):(0,_.jsx)("button",{type:"submit",onClick:le,className:"w-full bg-midnight-blue hover:bg-purple-night text-white py-3 px-4 rounded",children:"Realizar Pedido"})})]}):(0,_.jsx)("button",{className:"w-full bg-gray-600 text-white py-3 px-4 rounded",children:"Generando token..."})]}),coupon:T,apply_coupon:async e=>{e.preventDefault(),C(se)},coupon_name:se})]})]})})})}))},342:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(3401),r=(a(2342),a(35)),n=a(1507),o=a(9784),l=a(5043),i=a(3003),c=a(4834),d=a(8017),m=a(579);const p=(0,i.Ng)(null,{check_authenticated:r.f_,load_user:r.Jc,refresh:r.Ow,get_items:n.Su,get_total:n.OL,get_item_total:n.ES,get_user_profile:o.h})((e=>((0,l.useEffect)((()=>{e.refresh(),e.check_authenticated(),e.load_user(),e.get_items(),e.get_total(),e.get_item_total(),e.get_user_profile()}),[]),(0,m.jsxs)("div",{children:[(0,m.jsx)(c.A,{}),(0,m.jsx)(s.N9,{autoClose:5e3}),e.children,(0,m.jsx)(d.A,{})]}))))},1507:(e,t,a)=>{a.d(t,{ES:()=>i,K$:()=>n,OL:()=>l,Su:()=>o,eV:()=>c,j5:()=>d});var s=a(6213),r=a(4308);const n=e=>async t=>{if(localStorage.getItem("access")){const n={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},o=e.id,l=JSON.stringify({product_id:o});try{const e=await s.A.post("http://localhost:8000/api/cart/add-item",l,n);201===e.status?t({type:r.CF,payload:e.data}):t({type:r.J1})}catch(a){t({type:r.J1})}}else{let a=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")));let s=!0;a.map((t=>{e.id.toString()===t.product.id.toString()&&(s=!1)}));const n={product:e,count:1};s&&a.push(n),t({type:r.SJ,payload:a})}},o=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await s.A.get("http://localhost:8000/api/cart/cart-items",a);200===t.status?e({type:r._W,payload:t.data}):e({type:r.BS})}catch(t){e({type:r.BS})}}else e({type:r.K})},l=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await s.A.get("http://localhost:8000/api/cart/get-total",a);200===t.status?e({type:r.oy,payload:t.data}):e({type:r.pp})}catch(t){e({type:r.pp})}}else{let t=0,a=0,s=[];localStorage.getItem("cart")&&(s=JSON.parse(localStorage.getItem("cart")),s.map((e=>{t+=parseFloat(e.product.price)*parseFloat(e.count),a+=parseFloat(e.product.compare_price)*parseFloat(e.count)}))),e({type:r.Kl,payload:[parseFloat(t.toFixed(2)),parseFloat(a.toFixed(2))]})}},i=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await s.A.get("http://localhost:8000/api/cart/get-item-total",a);200===t.status?e({type:r.O5,payload:t.data}):e({type:r.DY})}catch(t){e({type:r.DY})}}else{let t=0;localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart")).length),e({type:r.Ig,payload:t})}},c=(e,t)=>async a=>{if(localStorage.getItem("access")){const o={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},l=e.product.id,i=JSON.stringify({product_id:l,count:t});try{const e=await s.A.put("http://localhost:8000/api/cart/update-item",i,o);200!==e.status||e.data.error?a({type:r.lP}):a({type:r.Qk,payload:e.data})}catch(n){a({type:r.lP})}}else{let s=[];localStorage.getItem("cart")&&(s=JSON.parse(localStorage.getItem("cart")),s.map(((a,r)=>{a.product.id.toString()===e.product.id.toString()&&(s[r].count=parseInt(t))}))),a({type:r.u3,payload:s})}},d=e=>async t=>{if(localStorage.getItem("access")){const n=e.product.id,o=JSON.stringify({product_id:n}),l={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`},data:o};try{const e=await s.A.delete("http://localhost:8000/api/cart/remove-item",l);200===e.status?t({type:r.J0,payload:e.data}):t({type:r.uP})}catch(a){t({type:r.uP})}}else{let a=[],s=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")),a.map((t=>{t.product.id.toString()!==e.product.id.toString()&&s.push(t)}))),t({type:r.Zk,payload:s})}}},227:(e,t,a)=>{a.d(t,{Dw:()=>l,Jf:()=>c,cL:()=>d,nx:()=>i});var s=a(6213),r=a(3115),n=a(1507),o=a(4308);const l=(e,t)=>async a=>{const r={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const n=await s.A.get(`http://localhost:8000/api/payment/get-payment-total?shipping_id=${e}&coupon_name=${t}`,r);200!==n.status||n.data.error?a({type:o.Wi}):a({type:o.TK,payload:n.data})}catch(n){a({type:o.Wi})}},i=()=>async e=>{const t={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const a=await s.A.get("http://localhost:8000/api/payment/get-token",t);200===a.status?e({type:o.IS,payload:a.data}):e({type:o.dx})}catch(a){e({type:o.dx})}},c=(e,t,a,l,i,c,d,m,p,u)=>async g=>{const h={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},x=JSON.stringify({nonce:e,shipping_id:t,coupon_name:a,full_name:l,address_line_1:i,address_line_2:c,city:d,state_province_region:m,age:p,telephone_number:u});g({type:o.Px});try{const e=await s.A.post("http://localhost:8000/api/payment/make-payment",x,h);200===e.status&&e.data.success?(g({type:o.$t}),g((0,r.n)(e.data.success,"green")),g((0,n.ES)())):(g({type:o.gm}),g((0,r.n)(e.data.error,"red")))}catch(y){g({type:o.gm}),g((0,r.n)("Error processing payment","red"))}g({type:o.L_}),window.scrollTo(0,0)},d=()=>e=>{e({type:o.P0})}},9784:(e,t,a)=>{a.d(t,{Y:()=>l,h:()=>o});var s=a(6213),r=a(3115),n=a(4308);const o=()=>async e=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const t=await s.A.get("http://localhost:8000/api/profile/user",a);200===t.status?e({type:n.xC,payload:t.data}):e({type:n.kA})}catch(t){e({type:n.kA})}}},l=(e,t,a,o,l,i,c)=>async d=>{if(localStorage.getItem("access")){const p={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},u=JSON.stringify({address_line_1:e,address_line_2:t,city:a,state_province_region:o,zipcode:l,phone:i,country_region:c});try{const e=await s.A.put("http://localhost:8000/api/profile/update",u,p);200===e.status?(d({type:n.Mf,payload:e.data}),d((0,r.n)("Profile updated successfully","green"))):(d({type:n.TX}),d((0,r.n)("Failed to update profile","red")))}catch(m){d({type:n.TX}),d((0,r.n)("Failed to update profile","red"))}}}}}]);
//# sourceMappingURL=8.65049b1a.chunk.js.map