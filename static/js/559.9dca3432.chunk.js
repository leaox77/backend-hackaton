"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[559],{9291:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var o=a(3003),s=a(342),c=a(5043),r=a(4308),i=a(6213);const n="http://localhost:8000/api/ml/sentimiento";var l=a(579);const p=(0,o.Ng)((t=>({sentiment_prediction:t.rl.sentiment_prediction,sentiment_model_message:t.rl.sentiment_model_message,sentiment_probability:t.rl.sentiment_probability,faltas_agresivas:t.rl.faltas_agresivas,suspendido:t.rl.suspendido})),{get_sentiment_prediction:t=>async e=>{try{const a={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},o=JSON.stringify({comment:t}),s=await i.A.post(`${n}/predict`,o,a);e({type:r.pv,payload:s.data})}catch(a){console.error("Error en predicci\xf3n:",a),e({type:r.u_})}},train_sentiment_model:()=>async t=>{try{const e=await i.A.get(`${n}/train`,{headers:{Accept:"application/json"}});t({type:r.fL,payload:e.data.message})}catch(e){console.error("Error entrenando modelo:",e),t({type:r.g6})}}})((function(t){let{sentiment_prediction:e,sentiment_model_message:a,sentiment_probability:o,faltas_agresivas:r,suspendido:i,get_sentiment_prediction:n,train_sentiment_model:p}=t;const[d,g]=(0,c.useState)(""),[u,m]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{if(null!==e){m(!0);const t=setTimeout((()=>m(!1)),5e3);return()=>clearTimeout(t)}}),[e]),(0,l.jsx)(s.A,{children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto mt-6 p-6 bg-white rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"An\xe1lisis de Estado Emocional"}),(0,l.jsx)("button",{onClick:()=>{p()},className:"mb-4 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Entrenar Modelo"}),a&&(0,l.jsx)("p",{className:"mb-4 text-green-700 font-medium",children:a}),(0,l.jsx)("textarea",{value:d,onChange:t=>g(t.target.value),placeholder:"Escribe un comentario...",className:"w-full border border-gray-300 rounded-md p-3 mb-4",rows:4}),(0,l.jsx)("button",{onClick:()=>{""!==d.trim()&&n(d)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Analizar Comentario"}),u&&e&&(0,l.jsxs)("div",{className:`mt-4 p-4 rounded-md text-white font-semibold text-center ${(t=>{switch(null===t||void 0===t?void 0:t.toLowerCase()){case"feliz":return"bg-green-500";case"preocupado":return"bg-yellow-500";case"neutral":return"bg-blue-500";case"desmotivado":return"bg-red-500";case"agresivo":return"bg-pink-600";default:return"bg-gray-500"}})(e)}`,children:[(t=>{switch(null===t||void 0===t?void 0:t.toLowerCase()){case"feliz":return"\ud83d\ude0a";case"preocupado":return"\ud83d\ude1f";case"neutral":return"\ud83d\ude10";case"desmotivado":return"\ud83d\ude1e";case"agresivo":return"\ud83d\ude21";default:return"\ud83e\udd14"}})(e)," El comentario fue clasificado como:"," ",(0,l.jsx)("strong",{className:"uppercase",children:e}),null!==o&&(0,l.jsxs)("span",{className:"block mt-1 text-sm text-white font-normal",children:["Probabilidad: ",(100*o).toFixed(2),"%"]})]}),u&&"Agresivo"===e&&(0,l.jsx)("div",{className:"mt-4 p-3 rounded-md bg-red-100 text-red-800 text-center font-medium",children:i?(0,l.jsxs)("div",{children:["\ud83d\uded1 Has alcanzado el l\xedmite de 3 comentarios agresivos. Tu cuenta ha sido suspendida.",(0,l.jsx)("br",{}),(0,l.jsx)("span",{className:"text-sm",children:"Por favor, contacta con soporte t\xe9cnico."})]}):(0,l.jsxs)("div",{children:["\u26a0\ufe0f Comentario agresivo detectado. Advertencia ",r,"/3."]})})]})})}))},342:(t,e,a)=>{a.d(e,{A:()=>g});var o=a(3401),s=(a(2342),a(35)),c=a(1507),r=a(9784),i=a(5043),n=a(3003),l=a(4834),p=a(8017),d=a(579);const g=(0,n.Ng)(null,{check_authenticated:s.f_,load_user:s.Jc,refresh:s.Ow,get_items:c.Su,get_total:c.OL,get_item_total:c.ES,get_user_profile:r.h})((t=>((0,i.useEffect)((()=>{t.refresh(),t.check_authenticated(),t.load_user(),t.get_items(),t.get_total(),t.get_item_total(),t.get_user_profile()}),[]),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.A,{}),(0,d.jsx)(o.N9,{autoClose:5e3}),t.children,(0,d.jsx)(p.A,{})]}))))},1507:(t,e,a)=>{a.d(e,{ES:()=>n,K$:()=>c,OL:()=>i,Su:()=>r,eV:()=>l,j5:()=>p});var o=a(6213),s=a(4308);const c=t=>async e=>{if(localStorage.getItem("access")){const c={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},r=t.id,i=JSON.stringify({product_id:r});try{const t=await o.A.post("http://localhost:8000/api/cart/add-item",i,c);201===t.status?e({type:s.CF,payload:t.data}):e({type:s.J1})}catch(a){e({type:s.J1})}}else{let a=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")));let o=!0;a.map((e=>{t.id.toString()===e.product.id.toString()&&(o=!1)}));const c={product:t,count:1};o&&a.push(c),e({type:s.SJ,payload:a})}},r=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/cart/cart-items",a);200===e.status?t({type:s._W,payload:e.data}):t({type:s.BS})}catch(e){t({type:s.BS})}}else t({type:s.K})},i=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/cart/get-total",a);200===e.status?t({type:s.oy,payload:e.data}):t({type:s.pp})}catch(e){t({type:s.pp})}}else{let e=0,a=0,o=[];localStorage.getItem("cart")&&(o=JSON.parse(localStorage.getItem("cart")),o.map((t=>{e+=parseFloat(t.product.price)*parseFloat(t.count),a+=parseFloat(t.product.compare_price)*parseFloat(t.count)}))),t({type:s.Kl,payload:[parseFloat(e.toFixed(2)),parseFloat(a.toFixed(2))]})}},n=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/cart/get-item-total",a);200===e.status?t({type:s.O5,payload:e.data}):t({type:s.DY})}catch(e){t({type:s.DY})}}else{let e=0;localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart")).length),t({type:s.Ig,payload:e})}},l=(t,e)=>async a=>{if(localStorage.getItem("access")){const r={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},i=t.product.id,n=JSON.stringify({product_id:i,count:e});try{const t=await o.A.put("http://localhost:8000/api/cart/update-item",n,r);200!==t.status||t.data.error?a({type:s.lP}):a({type:s.Qk,payload:t.data})}catch(c){a({type:s.lP})}}else{let o=[];localStorage.getItem("cart")&&(o=JSON.parse(localStorage.getItem("cart")),o.map(((a,s)=>{a.product.id.toString()===t.product.id.toString()&&(o[s].count=parseInt(e))}))),a({type:s.u3,payload:o})}},p=t=>async e=>{if(localStorage.getItem("access")){const c=t.product.id,r=JSON.stringify({product_id:c}),i={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`},data:r};try{const t=await o.A.delete("http://localhost:8000/api/cart/remove-item",i);200===t.status?e({type:s.J0,payload:t.data}):e({type:s.uP})}catch(a){e({type:s.uP})}}else{let a=[],o=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")),a.map((e=>{e.product.id.toString()!==t.product.id.toString()&&o.push(e)}))),e({type:s.Zk,payload:o})}}},9784:(t,e,a)=>{a.d(e,{Y:()=>i,h:()=>r});var o=a(6213),s=a(3115),c=a(4308);const r=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/profile/user",a);200===e.status?t({type:c.xC,payload:e.data}):t({type:c.kA})}catch(e){t({type:c.kA})}}},i=(t,e,a,r,i,n,l)=>async p=>{if(localStorage.getItem("access")){const g={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},u=JSON.stringify({address_line_1:t,address_line_2:e,city:a,state_province_region:r,zipcode:i,phone:n,country_region:l});try{const t=await o.A.put("http://localhost:8000/api/profile/update",u,g);200===t.status?(p({type:c.Mf,payload:t.data}),p((0,s.n)("Profile updated successfully","green"))):(p({type:c.TX}),p((0,s.n)("Failed to update profile","red")))}catch(d){p({type:c.TX}),p((0,s.n)("Failed to update profile","red"))}}}}}]);
//# sourceMappingURL=559.9dca3432.chunk.js.map