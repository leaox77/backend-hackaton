"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[491],{323:(t,e,a)=>{a.d(e,{A:()=>d});var s=a(5043),o=a(5475),r=a(6566),i=a(214),l=a(3340),c=a(3003),n=a(579);const d=(0,c.Ng)((t=>({user:t.Auth.user})),{})((t=>{var e,a,c,d,p,m,u,g,h,y;let{item:x,count:f,update_item:v,remove_item:j,render:_,setRender:w,setAlert:N,user:b}=t;const[S,A]=(0,s.useState)(1);(0,s.useEffect)((()=>{f&&A(f)}),[f]);return(0,n.jsxs)("li",{className:"flex py-6 sm:py-10",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("img",{src:null===x||void 0===x||null===(e=x.product)||void 0===e?void 0:e.photo,alt:`Imagen del producto ${(null===x||void 0===x||null===(a=x.product)||void 0===a?void 0:a.name)||""}`,className:"w-24 h-24 rounded-md object-center object-cover sm:w-48 sm:h-48"})}),(0,n.jsxs)("div",{className:"ml-4 flex-1 flex flex-col justify-between sm:ml-6",children:[(0,n.jsxs)("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)("h3",{className:"text-sm",children:(0,n.jsx)(o.N_,{to:`/product/${null===x||void 0===x||null===(c=x.product)||void 0===c?void 0:c.id}`,className:"font-medium text-gray-700 hover:text-gray-800",children:null===x||void 0===x||null===(d=x.product)||void 0===d?void 0:d.name})})}),(0,n.jsx)("div",{className:"mt-1 flex text-sm",children:(0,n.jsx)("p",{className:"text-gray-500",children:"Color"})}),(0,n.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:0===b.mayorista_tipo?`${null===x||void 0===x||null===(p=x.product)||void 0===p?void 0:p.price} Bs`:1===b.mayorista_tipo?`${null===x||void 0===x||null===(m=x.product)||void 0===m?void 0:m.price_mayorista_1} Bs`:2===b.mayorista_tipo?`${null===x||void 0===x||null===(u=x.product)||void 0===u?void 0:u.price_mayorista_2} Bs`:3===b.mayorista_tipo?`${null===x||void 0===x||null===(g=x.product)||void 0===g?void 0:g.price_mayorista_3} Bs`:"N/A"})]}),(0,n.jsxs)("div",{className:"mt-4 sm:mt-0 sm:pr-9",children:[(0,n.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{var e;(null===x||void 0===x||null===(e=x.product)||void 0===e?void 0:e.quantity)>=S?(await v(x,S),w(!_)):N("No hay suficiente stock disponible","danger")}catch(a){console.error("Error actualizando el carrito:",a),N("Error al actualizar el producto","danger")}},children:[(0,n.jsx)("select",{name:"item_count",onChange:t=>A(t.target.value),value:S,className:"max-w-full rounded-md border border-gray-300 py-1.5 text-base leading-5 font-medium text-gray-700 text-left shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Array.from({length:(null===x||void 0===x||null===(h=x.product)||void 0===h?void 0:h.quantity)||1},((t,e)=>(0,n.jsx)("option",{value:e+1,children:e+1},e+1)))}),(0,n.jsx)("button",{type:"submit",className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:(0,n.jsx)("span",{className:"mx-2",children:"Actualizar"})})]}),(0,n.jsx)("div",{className:"absolute top-0 right-0",children:(0,n.jsxs)("button",{onClick:async()=>{try{await j(x),w(!_)}catch(t){console.error("Error eliminando el producto:",t)}},className:"-m-2 p-2 inline-flex text-gray-400 hover:text-gray-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Eliminar"}),(0,n.jsx)(r.A,{className:"h-5 w-5","aria-hidden":"true"})]})})]})]}),(0,n.jsx)("p",{className:"mt-4 flex text-sm text-gray-700 space-x-2",children:(null===x||void 0===x||null===(y=x.product)||void 0===y?void 0:y.quantity)>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{className:"flex-shrink-0 h-5 w-5 text-green-500","aria-hidden":"false","aria-label":"En Stock"}),(0,n.jsx)("span",{children:"En Stock"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,{className:"flex-shrink-0 h-5 w-5 text-gray-300","aria-hidden":"false","aria-label":"Agotado"}),(0,n.jsx)("span",{children:"Agotado"})]})})]})]})}))},6751:(t,e,a)=>{a.r(e),a.d(e,{default:()=>m});var s=a(342),o=a(5043),r=a(3003),i=a(3115),l=a(1507),c=a(3178),n=a(323),d=a(5475),p=a(579);const m=(0,r.Ng)((t=>({isAuthenticated:t.Auth.isAuthenticated,items:t.Cart.items,wishlist_items:t.Wishlist.items,amount:t.Cart.amount,compare_amount:t.Cart.compare_amount,total_items:t.Cart.total_items,user:t.Auth.user})),{get_items:l.Su,get_total:l.OL,get_item_total:l.ES,remove_item:l.j5,update_item:l.eV,setAlert:i.n,remove_wishlist_item:c.dm,get_wishlist_items:c.uO})((t=>{let{get_items:e,get_total:a,get_item_total:i,isAuthenticated:l,items:m,compare_amount:u,total_items:g,remove_item:h,update_item:y,setAlert:x,wishlist_items:f,user:v}=t;const j=(0,r.wA)(),[_,w]=(0,o.useState)(!1);(0,o.useEffect)((()=>{window.scrollTo(0,0),e(),a(),i(),j((0,c.uO)())}),[_,e,a,i,j]);const N=m&&0!==m.length?m.reduce(((t,e)=>{var a,s,o,r;let i=(null===(a=e.product)||void 0===a?void 0:a.price)||0;return 1===(null===v||void 0===v?void 0:v.mayorista_tipo)?i=(null===(s=e.product)||void 0===s?void 0:s.price_mayorista_1)||i:2===(null===v||void 0===v?void 0:v.mayorista_tipo)?i=(null===(o=e.product)||void 0===o?void 0:o.price_mayorista_2)||i:3===(null===v||void 0===v?void 0:v.mayorista_tipo)&&(i=(null===(r=e.product)||void 0===r?void 0:r.price_mayorista_3)||i),t+i*e.count}),0):0;return(0,p.jsx)(s.A,{children:(0,p.jsx)("div",{className:"bg-white",children:(0,p.jsxs)("div",{className:"max-w-2xl mx-auto pt-16 pb-24 px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:[(0,p.jsxs)("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:["Productos en Carrito (",g,")"]}),(0,p.jsxs)("div",{className:"mt-12 lg:grid lg:grid-cols-12 lg:gap-x-12 lg:items-start xl:gap-x-16",children:[(0,p.jsxs)("section",{"aria-labelledby":"cart-heading",className:"lg:col-span-7",children:[(0,p.jsx)("h2",{id:"cart-heading",className:"sr-only",children:"Items in your shopping cart"}),(0,p.jsx)("ul",{className:"border-t border-b border-gray-200 divide-y divide-gray-200",children:(0,p.jsx)("div",{children:m&&0!==m.length&&m.map(((t,e)=>{let a=t.count;return(0,p.jsx)("div",{children:(0,p.jsx)(n.A,{item:t,count:a,update_item:y,remove_item:h,render:_,setRender:w,setAlert:x})},e)}))})})]}),(0,p.jsxs)("section",{"aria-labelledby":"summary-heading",className:"mt-16 bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8 lg:mt-0 lg:col-span-5",children:[(0,p.jsx)("h2",{id:"summary-heading",className:"text-lg font-medium text-gray-900",children:"Resumen del pedido"}),(0,p.jsxs)("dl",{className:"mt-6 space-y-4",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),(0,p.jsxs)("dd",{className:"text-sm font-medium text-gray-900",children:[u.toFixed(2)," Bs"]})]}),(0,p.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,p.jsx)("dt",{className:"text-sm text-gray-600",children:"Estimaci\xf3n de env\xedo"}),(0,p.jsx)("dd",{className:"text-sm font-medium text-gray-900",children:"0 Bs"})]}),(0,p.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,p.jsx)("dt",{className:"text-sm text-gray-600",children:"Estimaci\xf3n de Impuestos"}),(0,p.jsx)("dd",{className:"text-sm font-medium text-gray-900",children:"0 Bs"})]}),(0,p.jsxs)("div",{className:"border-t border-gray-200 pt-4 flex items-center justify-between",children:[(0,p.jsx)("dt",{className:"text-base font-medium text-gray-900",children:"Total Pedido"}),(0,p.jsxs)("dd",{className:"text-base font-medium text-gray-900",children:[N.toFixed(2)," Bs"]})]})]}),(0,p.jsx)("div",{className:"mt-6",children:g<1?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.N_,{to:"/shop",children:(0,p.jsx)("button",{className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-purple-night",children:"Buscar items"})})}):l?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.N_,{to:"/checkout",children:(0,p.jsx)("button",{className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-purple-night",children:"Verificar"})})}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.N_,{to:"/login",children:(0,p.jsx)("button",{className:"w-full bg-midnight-blue border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-purple-night focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-purple-night",children:"Login"})})})})]})]})]})})})}))},342:(t,e,a)=>{a.d(e,{A:()=>m});var s=a(3401),o=(a(2342),a(35)),r=a(1507),i=a(9784),l=a(5043),c=a(3003),n=a(4834),d=a(8017),p=a(579);const m=(0,c.Ng)(null,{check_authenticated:o.f_,load_user:o.Jc,refresh:o.Ow,get_items:r.Su,get_total:r.OL,get_item_total:r.ES,get_user_profile:i.h})((t=>((0,l.useEffect)((()=>{t.refresh(),t.check_authenticated(),t.load_user(),t.get_items(),t.get_total(),t.get_item_total(),t.get_user_profile()}),[]),(0,p.jsxs)("div",{children:[(0,p.jsx)(n.A,{}),(0,p.jsx)(s.N9,{autoClose:5e3}),t.children,(0,p.jsx)(d.A,{})]}))))},1507:(t,e,a)=>{a.d(e,{ES:()=>c,K$:()=>r,OL:()=>l,Su:()=>i,eV:()=>n,j5:()=>d});var s=a(6213),o=a(4308);const r=t=>async e=>{if(localStorage.getItem("access")){const r={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},i=t.id,l=JSON.stringify({product_id:i});try{const t=await s.A.post("http://localhost:8000/api/cart/add-item",l,r);201===t.status?e({type:o.CF,payload:t.data}):e({type:o.J1})}catch(a){e({type:o.J1})}}else{let a=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")));let s=!0;a.map((e=>{t.id.toString()===e.product.id.toString()&&(s=!1)}));const r={product:t,count:1};s&&a.push(r),e({type:o.SJ,payload:a})}},i=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await s.A.get("http://localhost:8000/api/cart/cart-items",a);200===e.status?t({type:o._W,payload:e.data}):t({type:o.BS})}catch(e){t({type:o.BS})}}else t({type:o.K})},l=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await s.A.get("http://localhost:8000/api/cart/get-total",a);200===e.status?t({type:o.oy,payload:e.data}):t({type:o.pp})}catch(e){t({type:o.pp})}}else{let e=0,a=0,s=[];localStorage.getItem("cart")&&(s=JSON.parse(localStorage.getItem("cart")),s.map((t=>{e+=parseFloat(t.product.price)*parseFloat(t.count),a+=parseFloat(t.product.compare_price)*parseFloat(t.count)}))),t({type:o.Kl,payload:[parseFloat(e.toFixed(2)),parseFloat(a.toFixed(2))]})}},c=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await s.A.get("http://localhost:8000/api/cart/get-item-total",a);200===e.status?t({type:o.O5,payload:e.data}):t({type:o.DY})}catch(e){t({type:o.DY})}}else{let e=0;localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart")).length),t({type:o.Ig,payload:e})}},n=(t,e)=>async a=>{if(localStorage.getItem("access")){const i={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},l=t.product.id,c=JSON.stringify({product_id:l,count:e});try{const t=await s.A.put("http://localhost:8000/api/cart/update-item",c,i);200!==t.status||t.data.error?a({type:o.lP}):a({type:o.Qk,payload:t.data})}catch(r){a({type:o.lP})}}else{let s=[];localStorage.getItem("cart")&&(s=JSON.parse(localStorage.getItem("cart")),s.map(((a,o)=>{a.product.id.toString()===t.product.id.toString()&&(s[o].count=parseInt(e))}))),a({type:o.u3,payload:s})}},d=t=>async e=>{if(localStorage.getItem("access")){const r=t.product.id,i=JSON.stringify({product_id:r}),l={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`},data:i};try{const t=await s.A.delete("http://localhost:8000/api/cart/remove-item",l);200===t.status?e({type:o.J0,payload:t.data}):e({type:o.uP})}catch(a){e({type:o.uP})}}else{let a=[],s=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")),a.map((e=>{e.product.id.toString()!==t.product.id.toString()&&s.push(e)}))),e({type:o.Zk,payload:s})}}},9784:(t,e,a)=>{a.d(e,{Y:()=>l,h:()=>i});var s=a(6213),o=a(3115),r=a(4308);const i=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await s.A.get("http://localhost:8000/api/profile/user",a);200===e.status?t({type:r.xC,payload:e.data}):t({type:r.kA})}catch(e){t({type:r.kA})}}},l=(t,e,a,i,l,c,n)=>async d=>{if(localStorage.getItem("access")){const m={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},u=JSON.stringify({address_line_1:t,address_line_2:e,city:a,state_province_region:i,zipcode:l,phone:c,country_region:n});try{const t=await s.A.put("http://localhost:8000/api/profile/update",u,m);200===t.status?(d({type:r.Mf,payload:t.data}),d((0,o.n)("Profile updated successfully","green"))):(d({type:r.TX}),d((0,o.n)("Failed to update profile","red")))}catch(p){d({type:r.TX}),d((0,o.n)("Failed to update profile","red"))}}}},3178:(t,e,a)=>{a.d(e,{OY:()=>l,dm:()=>n,mN:()=>c,uO:()=>i});var s=a(6213),o=a(4308);const r=()=>({headers:{Authorization:`JWT ${localStorage.getItem("access")}`,"Content-Type":"application/json",Accept:"application/json"}}),i=()=>async t=>{if(localStorage.getItem("access"))try{const e=await s.A.get("http://localhost:8000/api/wishlist/wishlist-items",r());t({type:o.Q$,payload:e.data})}catch(e){t({type:o.ti})}},l=t=>async e=>{if(!localStorage.getItem("access"))return;const a=JSON.stringify({product_id:t});try{const t=await s.A.post("http://localhost:8000/api/wishlist/add-item",a,r());e({type:o.eW,payload:t.data})}catch(i){e({type:o.Xd})}},c=()=>async t=>{if(localStorage.getItem("access"))try{const e=await s.A.get("http://localhost:8000/api/wishlist/get-item-total",r());t({type:o.qT,payload:e.data})}catch(e){t({type:o.hZ})}},n=t=>async e=>{if(!localStorage.getItem("access"))return;const a={...r(),data:{product_id:t}};try{await s.A.delete("http://localhost:8000/api/wishlist/remove-item",a),e({type:o.$F,payload:t}),console.log("\ud83d\ude80 Producto eliminado del wishlist:",t)}catch(i){e({type:o.in})}}},214:(t,e,a)=>{a.d(e,{A:()=>o});var s=a(5043);const o=s.forwardRef((function(t,e){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),s.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}))},3340:(t,e,a)=>{a.d(e,{A:()=>o});var s=a(5043);const o=s.forwardRef((function(t,e){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"}))}))},6566:(t,e,a)=>{a.d(e,{A:()=>o});var s=a(5043);const o=s.forwardRef((function(t,e){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},t),s.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))}))}}]);
//# sourceMappingURL=491.d6295ab6.chunk.js.map