"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[559],{9291:(t,e,a)=>{a.r(e),a.d(e,{default:()=>n});var o=a(3003),c=a(342),s=a(5043),l=a(4308),r=a(6213);var i=a(579);const n=(0,o.Ng)((t=>({sentiment_prediction:t.rl.sentiment_prediction,sentiment_model_message:t.rl.sentiment_model_message})),{get_sentiment_prediction:t=>async e=>{localStorage.getItem("access");const a={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},o=JSON.stringify({comment:t});try{const t=await r.A.post("http://localhost:8000/api/ml/sentimiento/predict",o,a);e({type:l.pv,payload:t.data.prediction})}catch(s){var c;console.error("\u274c ERROR AL PREDECIR:",null===(c=s.response)||void 0===c?void 0:c.data),e({type:l.u_})}},train_sentiment_model:()=>async t=>{try{const e=await r.A.get("http://localhost:8000/api/ml/sentimiento/train",{headers:{Accept:"application/json"}});t({type:l.fL,payload:e.data.message})}catch(e){t({type:l.g6})}}})((function(t){let{sentiment_prediction:e,sentiment_model_message:a,get_sentiment_prediction:o,train_sentiment_model:l}=t;const[r,n]=(0,s.useState)(""),[p,d]=(0,s.useState)(!1);return console.log("\ud83d\udd25 Valor actual de sentiment_prediction:",e),(0,s.useEffect)((()=>{if(null!==e){console.log("\ud83c\udf89 Se activ\xf3 el useEffect para mostrar alerta"),d(!0);const t=setTimeout((()=>{d(!1),console.log("\u231b Alerta oculta autom\xe1ticamente")}),3e3);return()=>clearTimeout(t)}}),[e]),(0,i.jsx)(c.A,{children:(0,i.jsxs)("div",{className:"max-w-2xl mx-auto mt-6 p-6 bg-white rounded-lg shadow-md",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"An\xe1lisis de Sentimiento"}),(0,i.jsx)("button",{onClick:()=>{l()},className:"mb-4 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Entrenar Modelo"}),a&&(0,i.jsx)("p",{className:"mb-4 text-green-700",children:a}),(0,i.jsx)("textarea",{value:r,onChange:t=>n(t.target.value),placeholder:"Escribe un comentario...",className:"w-full border border-gray-300 rounded-md p-3 mb-4",rows:4}),(0,i.jsx)("button",{onClick:()=>{""!==r.trim()&&(console.log("\u2705 Bot\xf3n presionado, comentario enviado:",r),o(r))},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Analizar Comentario"}),p&&e&&(0,i.jsxs)("div",{className:"mt-4 p-4 rounded-md text-white font-semibold text-center "+(g=e,"positivo"===g?"bg-green-500":"negativo"===g?"bg-yellow-500":"agresivo"===g?"bg-red-600":"bg-gray-500"),children:["El comentario fue clasificado como: ",e.toUpperCase()]})]})});var g}))},342:(t,e,a)=>{a.d(e,{A:()=>g});var o=a(3401),c=(a(2342),a(35)),s=a(1507),l=a(9784),r=a(5043),i=a(3003),n=a(4834),p=a(8017),d=a(579);const g=(0,i.Ng)(null,{check_authenticated:c.f_,load_user:c.Jc,refresh:c.Ow,get_items:s.Su,get_total:s.OL,get_item_total:s.ES,get_user_profile:l.h})((t=>((0,r.useEffect)((()=>{t.refresh(),t.check_authenticated(),t.load_user(),t.get_items(),t.get_total(),t.get_item_total(),t.get_user_profile()}),[]),(0,d.jsxs)("div",{children:[(0,d.jsx)(n.A,{}),(0,d.jsx)(o.N9,{autoClose:5e3}),t.children,(0,d.jsx)(p.A,{})]}))))},1507:(t,e,a)=>{a.d(e,{ES:()=>i,K$:()=>s,OL:()=>r,Su:()=>l,eV:()=>n,j5:()=>p});var o=a(6213),c=a(4308);const s=t=>async e=>{if(localStorage.getItem("access")){const s={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},l=t.id,r=JSON.stringify({product_id:l});try{const t=await o.A.post("http://localhost:8000/api/cart/add-item",r,s);201===t.status?e({type:c.CF,payload:t.data}):e({type:c.J1})}catch(a){e({type:c.J1})}}else{let a=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")));let o=!0;a.map((e=>{t.id.toString()===e.product.id.toString()&&(o=!1)}));const s={product:t,count:1};o&&a.push(s),e({type:c.SJ,payload:a})}},l=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/cart/cart-items",a);200===e.status?t({type:c._W,payload:e.data}):t({type:c.BS})}catch(e){t({type:c.BS})}}else t({type:c.K})},r=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/cart/get-total",a);200===e.status?t({type:c.oy,payload:e.data}):t({type:c.pp})}catch(e){t({type:c.pp})}}else{let e=0,a=0,o=[];localStorage.getItem("cart")&&(o=JSON.parse(localStorage.getItem("cart")),o.map((t=>{e+=parseFloat(t.product.price)*parseFloat(t.count),a+=parseFloat(t.product.compare_price)*parseFloat(t.count)}))),t({type:c.Kl,payload:[parseFloat(e.toFixed(2)),parseFloat(a.toFixed(2))]})}},i=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/cart/get-item-total",a);200===e.status?t({type:c.O5,payload:e.data}):t({type:c.DY})}catch(e){t({type:c.DY})}}else{let e=0;localStorage.getItem("cart")&&(e=JSON.parse(localStorage.getItem("cart")).length),t({type:c.Ig,payload:e})}},n=(t,e)=>async a=>{if(localStorage.getItem("access")){const l={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},r=t.product.id,i=JSON.stringify({product_id:r,count:e});try{const t=await o.A.put("http://localhost:8000/api/cart/update-item",i,l);200!==t.status||t.data.error?a({type:c.lP}):a({type:c.Qk,payload:t.data})}catch(s){a({type:c.lP})}}else{let o=[];localStorage.getItem("cart")&&(o=JSON.parse(localStorage.getItem("cart")),o.map(((a,c)=>{a.product.id.toString()===t.product.id.toString()&&(o[c].count=parseInt(e))}))),a({type:c.u3,payload:o})}},p=t=>async e=>{if(localStorage.getItem("access")){const s=t.product.id,l=JSON.stringify({product_id:s}),r={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`},data:l};try{const t=await o.A.delete("http://localhost:8000/api/cart/remove-item",r);200===t.status?e({type:c.J0,payload:t.data}):e({type:c.uP})}catch(a){e({type:c.uP})}}else{let a=[],o=[];localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart")),a.map((e=>{e.product.id.toString()!==t.product.id.toString()&&o.push(e)}))),e({type:c.Zk,payload:o})}}},9784:(t,e,a)=>{a.d(e,{Y:()=>r,h:()=>l});var o=a(6213),c=a(3115),s=a(4308);const l=()=>async t=>{if(localStorage.getItem("access")){const a={headers:{Accept:"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}};try{const e=await o.A.get("http://localhost:8000/api/profile/user",a);200===e.status?t({type:s.xC,payload:e.data}):t({type:s.kA})}catch(e){t({type:s.kA})}}},r=(t,e,a,l,r,i,n)=>async p=>{if(localStorage.getItem("access")){const g={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`JWT ${localStorage.getItem("access")}`}},m=JSON.stringify({address_line_1:t,address_line_2:e,city:a,state_province_region:l,zipcode:r,phone:i,country_region:n});try{const t=await o.A.put("http://localhost:8000/api/profile/update",m,g);200===t.status?(p({type:s.Mf,payload:t.data}),p((0,c.n)("Profile updated successfully","green"))):(p({type:s.TX}),p((0,c.n)("Failed to update profile","red")))}catch(d){p({type:s.TX}),p((0,c.n)("Failed to update profile","red"))}}}}}]);
//# sourceMappingURL=559.039aa67f.chunk.js.map